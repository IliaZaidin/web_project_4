!function(){var t={588:function(t,e,r){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}var o=function(t){"use strict";var e,r=Object.prototype,o=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof v?e:v,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(t,e,r){var n=p;return function(o,i){if(n===y)throw new Error("Generator is already running");if(n===d){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=C(a,r);if(u){if(u===_)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===p)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=y;var c=f(t,e,r);if("normal"===c.type){if(n=r.done?d:h,c.arg===_)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=d,r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",_={};function v(){}function m(){}function b(){}var g={};s(g,a,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(P([])));k&&k!==r&&o.call(k,a)&&(g=k);var E=b.prototype=v.prototype=Object.create(g);function S(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(i,a,u,c){var s=f(t[i],t,a);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"===n(p)&&o.call(p,"__await")?e.resolve(p.__await).then((function(t){r("next",t,u,c)}),(function(t){r("throw",t,u,c)})):e.resolve(p).then((function(t){l.value=t,u(l)}),(function(t){return r("throw",t,u,c)}))}c(s.arg)}var i;this._invoke=function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}}function C(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method))return _;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var o=f(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,_;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,_):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function P(t){if(t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(o.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}return{next:T}}function T(){return{value:e,done:!0}}return m.prototype=b,s(E,"constructor",b),s(b,"constructor",m),m.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,c,"GeneratorFunction")),t.prototype=Object.create(E),t},t.awrap=function(t){return{__await:t}},S(L.prototype),s(L.prototype,u,(function(){return this})),t.AsyncIterator=L,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),s(E,c,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=P,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),s=o.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),_}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),_}},t}("object"===n(t=r.nmd(t))?t.exports:{});try{regeneratorRuntime=o}catch(t){"object"===("undefined"==typeof globalThis?"undefined":n(globalThis))?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={id:n,loaded:!1,exports:{}};return t[n](i,i.exports,r),i.loaded=!0,i.exports}r.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},function(){"use strict";function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}r(588);var e=function(){function e(t,r,n,o,i,a,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this._text=t.name,this._link=t.link,this._cardId=t._id,this._ownerName=t.owner.name,this._ownerId=t.owner._id,this._myId=r,this._likesArray=t.likes,this._likesCount=t.likes.length,this._myLike=!1,this._newCard=n.querySelector(".picture-grid__item").cloneNode(!0),this._cardTitle=this._newCard.querySelector(".picture-grid__title"),this._cardPicture=this._newCard.querySelector(".picture-grid__img"),this._cardLikeButton=this._newCard.querySelector(".picture-grid__like"),this._cardLikes=this._newCard.querySelector(".picture-grid__likes"),this._cardDeleteButton=this._newCard.querySelector(".picture-grid__delete"),this._confirmButton=u,this._api=i,this._handleCardClick=o,this._cardDeletePopup=a}var r,n;return r=e,(n=[{key:"_setEventListeners",value:function(){var t=this;this._cardLikeButton.addEventListener("click",(function(e){t._myLike?(e.target.classList.remove("picture-grid__like_active"),t._myLike=!1,t._api.dislike(t._cardId).then((function(e){t._cardLikes.textContent=e.likes.length}))):(e.target.classList.add("picture-grid__like_active"),t._myLike=!0,t._api.like(t._cardId).then((function(e){t._cardLikes.textContent=e.likes.length})))})),this._cardDeleteButton.addEventListener("click",(function(){t._cardDeletePopup.open(),t._cardDeletePopup.setEventListeners(),t._confirmButton.addEventListener("click",(function(){t._api.deleteCard(t._cardId).then((function(){t._newCard.remove(),t._newCard=null,t._cardDeletePopup.close(),t._confirmButton.removeEventListener("click",t._deleteCard)}))}))})),this._newCard.querySelector(".picture-grid__img").addEventListener("click",(function(e){var r=t._likesArray.map((function(t){return" "+t.name})),n=t._text+" by "+t._ownerName+". Liked by:"+r;t._handleCardClick(t._link,n)}))}},{key:"_checkMyLikes",value:function(){var t=this;this._likesArray.forEach((function(e){e._id===t._myId&&(t._cardLikeButton.classList.add("picture-grid__like_active"),t._myLike=!0)}))}},{key:"_checkCardOwner",value:function(){this._ownerId===this._myId&&this._cardDeleteButton.classList.remove("picture-grid__delete_disabled")}},{key:"_presetNewCard",value:function(){this._cardTitle.textContent=this._text,this._cardPicture.src=this._link,this._cardPicture.alt=this._text,this._cardLikes.textContent=this._likesCount,this._checkMyLikes(),this._checkCardOwner()}},{key:"createCard",value:function(){return this._presetNewCard(),this._setEventListeners(),this._newCard}}])&&t(r.prototype,n),e}();function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=r,this._inputFields=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=r.querySelector(e.submitButtonSelector)}var e,r;return e=t,(r=[{key:"_disableSubmitButton",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled","")}},{key:"_enableSubmitButton",value:function(){this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.removeAttribute("disabled","")}},{key:"_toggleButtonState",value:function(){this._inputFields.some((function(t){return!t.validity.valid}))?this._disableSubmitButton(this._buttonElement):this._enableSubmitButton(this._buttonElement)}},{key:"_showInputError",value:function(t,e){t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(t,e){t.classList.remove(this._inputErrorClass),e.textContent="",e.classList.remove(this._errorClass)}},{key:"_checkInputValidity",value:function(t){var e=this._formElement.querySelector("#".concat(t.id,"_error"));t.validity.valid?this._hideInputError(t,e):this._showInputError(t,e)}},{key:"_setEventListeners",value:function(){var t=this;this._inputFields.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState(t._inputFields,t._buttonElement)}))}))}},{key:"resetValidation",value:function(){var t=this;this._disableSubmitButton(),this._inputFields.forEach((function(e){var r=t._formElement.querySelector("#".concat(e.id,"_error"));t._hideInputError(e,r)}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&n(e.prototype,r),t}();function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._userName=document.querySelector(".profile__title"),this._userJob=document.querySelector(".profile__subtitle"),this._userAvatar=document.querySelector(".profile__picture")}var e,r;return e=t,(r=[{key:"getUserInfo",value:function(){return{name:this._userName.textContent,job:this._userJob.textContent}}},{key:"setUserInfo",value:function(t,e){this._userName.textContent=t,this._userJob.textContent=e}},{key:"setUserAvatar",value:function(t){this._userAvatar.src=t}}])&&i(e.prototype,r),t}();function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var s=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popupItem=document.querySelector(e),this._popupCloseButton=this._popupItem.querySelector(".popup__close"),this._closeOnEscape=function(t){"Escape"===t.key&&r.close()}}var e,r;return e=t,(r=[{key:"open",value:function(){document.addEventListener("keyup",this._closeOnEscape),this._popupItem.classList.add("popup_is_opened")}},{key:"close",value:function(){document.removeEventListener("keyup",this._closeOnEscape),this._popupItem.classList.remove("popup_is_opened")}},{key:"setEventListeners",value:function(){var t=this;this._popupCloseButton.addEventListener("click",(function(e){t.close(),e.stopImmediatePropagation()})),this._popupItem.addEventListener("mousedown",(function(e){var r;(r=e.target.classList,function(t){if(Array.isArray(t))return u(t)}(r)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).includes("popup")&&t.close(),e.stopImmediatePropagation()}))}}])&&c(e.prototype,r),t}();function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=h(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},p.apply(this,arguments)}function h(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_(t)););return t}function y(t,e){return y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},y(t,e)}function d(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _(t){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_(t)}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=_(n);if(o){var r=_(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return d(this,t)});function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e))._submitForm=t,r._fieldsData={},r._formElement=r._popupItem.querySelector(".form"),r._inputsList=r._popupItem.querySelectorAll(".form__input"),r}return e=a,(r=[{key:"close",value:function(){this._formElement.reset(),p(_(a.prototype),"close",this).call(this)}},{key:"_getInputValues",value:function(){var t=this;this._inputsList.forEach((function(e){t._fieldsData[e.name]=e.value}))}},{key:"setEventListeners",value:function(){var t=this;this._popupItem.addEventListener("submit",(function(e){t._getInputValues(),t._submitForm(e,t._fieldsData),e.stopImmediatePropagation()})),p(_(a.prototype),"setEventListeners",this).call(this)}}])&&f(e.prototype,r),a}(s);function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function b(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=w(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},g.apply(this,arguments)}function w(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=S(t)););return t}function k(t,e){return k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},k(t,e)}function E(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function S(t){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},S(t)}var L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=S(n);if(o){var r=S(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return E(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t))._popupTitle=document.querySelector(".popup__title_type_picture"),e._popupLink=document.querySelector(".popup__picture-link"),e}return e=a,(r=[{key:"open",value:function(t,e){this._popupLink.setAttribute("src",t),this._popupLink.setAttribute("alt",e),this._popupTitle.textContent=e,g(S(a.prototype),"open",this).call(this)}}])&&b(e.prototype,r),a}(s);function C(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var j=function(){function t(e,r){var n=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=n,this._classContainer=document.querySelector(r)}var e,r;return e=t,(r=[{key:"addItem",value:function(t,e){this._classContainer.prepend(this._renderer(t,e))}},{key:"renderAll",value:function(t,e){var r=this;t.forEach((function(t){r.addItem(t,e)}))}}])&&C(e.prototype,r),t}();function O(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var x=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=e.baseUrl,this._token=e.token}var e,r;return e=t,(r=[{key:"getUserData",value:function(){return fetch("".concat(this._url,"/users/me"),{headers:{authorization:this._token}}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))})).catch((function(t){console.log("Error: ",t.status,t.statusText)}))}},{key:"getCards",value:function(){return fetch("".concat(this._url,"/cards"),{headers:{authorization:this._token}}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))})).catch((function(t){console.log("Error: ",t.status,t.statusText)}))}},{key:"editProfile",value:function(t,e){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t,about:e})}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))})).catch((function(t){window.alert("Something went wrong. Please cancel and try again."),console.log("Error: ",t.status,t.statusText)}))}},{key:"updateProfilePicture",value:function(t){return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:t})}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))})).catch((function(t){window.alert("Something went wrong. Please cancel and try again."),console.log("Error: ",t.status,t.statusText)}))}},{key:"addCard",value:function(t,e){return fetch("".concat(this._url,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t,link:e})}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))})).catch((function(t){window.alert("Something went wrong. Please cancel and try again."),console.log("Error: ",t.status,t.statusText)}))}},{key:"deleteCard",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t),{method:"DELETE",headers:{authorization:this._token}}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))})).catch((function(t){console.log("Error: ",t.status,t.statusText)}))}},{key:"like",value:function(t){return fetch("".concat(this._url,"/cards/likes/").concat(t),{method:"PUT",headers:{authorization:this._token}}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))})).catch((function(t){console.log("Error: ",t.status,t.statusText)}))}},{key:"dislike",value:function(t){return fetch("".concat(this._url,"/cards/likes/").concat(t),{method:"DELETE",headers:{authorization:this._token}}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))})).catch((function(t){console.log("Error: ",t.status,t.statusText)}))}}])&&O(e.prototype,r),t}();function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function T(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=q(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},I.apply(this,arguments)}function q(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=A(t)););return t}function B(t,e){return B=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},B(t,e)}function R(t,e){if(e&&("object"===P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function A(t){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},A(t)}var D=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&B(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=A(n);if(o){var r=A(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return R(this,t)});function a(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,t)}return e=a,(r=[{key:"setEventListeners",value:function(){I(A(a.prototype),"setEventListeners",this).call(this)}}])&&T(e.prototype,r),a}(s),N={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"form__submit_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"},U=document.querySelector(".profile__edit-button"),F=document.querySelector(".form__input_type_name"),V=document.querySelector(".form__input_type_about"),z=document.querySelector(".profile__picture"),G=document.querySelector(".profile__add-button"),J=document.querySelector(".card-template").content,M=document.querySelector(".form__submit_type_confirm"),H=document.querySelector(".form__submit_type_profile"),Y=document.querySelector(".form__submit_type_avatar"),$=document.querySelector(".form__submit_type_card"),K=new x({baseUrl:"https://around.nomoreparties.co/v1/group-12",token:"3818518a-0f00-4af2-b13c-93949a3b17de"}),Q=new o(N,document.querySelector(".form_type_profile")),W=new o(N,document.querySelector(".form_type_card")),X=new o(N,document.querySelector(".form_type_avatar")),Z=new v((function(t,e){t.preventDefault(),H.textContent="Saving...",K.editProfile(e.profile_name,e.profile_job).then((function(t){nt.setUserInfo(t.name,t.about),Z.close(),H.textContent="Save"}))}),".popup_type_profile"),tt=new v((function(t,e){t.preventDefault(),$.textContent="Saving...",K.getUserData().then((function(t){K.addCard(e.card_title,e.card_link).then((function(e){rt.addItem(e,t._id),$.textContent="Create",tt.close()}))}))}),".popup_type_card"),et=new v((function(t,e){t.preventDefault(),Y.textContent="Saving...",K.updateProfilePicture(e.avatar_link).then((function(t){nt.setUserAvatar(t.avatar),et.close(),Y.textContent="Save"}))}),".popup_type_avatar"),rt=new j({renderer:function(t,r){return new e(t,r,J,at,K,it,M).createCard()}},".picture-grid"),nt=new a,ot=new L(".popup_type_picture"),it=new D(".popup_type_confirm");function at(t,e){ot.open(t,e)}U.addEventListener("click",(function(){var t=nt.getUserInfo(),e=t.name,r=t.job;F.value=e,V.value=r,Q.resetValidation(),H.textContent="Save",Z.open()})),G.addEventListener("click",(function(){W.resetValidation(),$.textContent="Create",tt.open()})),z.addEventListener("click",(function(){X.resetValidation(),Y.textContent="Save",et.open()})),window.onload=function(){K.getUserData().then((function(t){var e;nt.setUserInfo(t.name,t.about),nt.setUserAvatar(t.avatar),e=t._id,K.getCards().then((function(t){rt.renderAll(t,e)}))})),W.enableValidation(),Q.enableValidation(),X.enableValidation(),ot.setEventListeners(),Z.setEventListeners(),tt.setEventListeners(),et.setEventListeners()}}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoiNlFBT0EsSUFBSUEsRUFBVyxTQUFVQyxHQUN2QixhQUVBLElBRUlDLEVBRkFDLEVBQUtDLE9BQU9DLFVBQ1pDLEVBQVNILEVBQUdJLGVBRVpDLEVBQTRCLG1CQUFYQyxPQUF3QkEsT0FBUyxHQUNsREMsRUFBaUJGLEVBQVFHLFVBQVksYUFDckNDLEVBQXNCSixFQUFRSyxlQUFpQixrQkFDL0NDLEVBQW9CTixFQUFRTyxhQUFlLGdCQUUvQyxTQUFTQyxFQUFPQyxFQUFLQyxFQUFLQyxHQU94QixPQU5BZixPQUFPZ0IsZUFBZUgsRUFBS0MsRUFBSyxDQUM5QkMsTUFBT0EsRUFDUEUsWUFBWSxFQUNaQyxjQUFjLEVBQ2RDLFVBQVUsSUFFTE4sRUFBSUMsR0FFYixJQUVFRixFQUFPLEdBQUksSUFDWCxNQUFPUSxHQUNQUixFQUFTLFNBQVNDLEVBQUtDLEVBQUtDLEdBQzFCLE9BQU9GLEVBQUlDLEdBQU9DLEdBSXRCLFNBQVNNLEVBQUtDLEVBQVNDLEVBQVNDLEVBQU1DLEdBRXBDLElBQUlDLEVBQWlCSCxHQUFXQSxFQUFRdEIscUJBQXFCMEIsRUFBWUosRUFBVUksRUFDL0VDLEVBQVk1QixPQUFPNkIsT0FBT0gsRUFBZXpCLFdBQ3pDNkIsRUFBVSxJQUFJQyxFQUFRTixHQUFlLElBTXpDLE9BRkFHLEVBQVVJLFFBdU1aLFNBQTBCVixFQUFTRSxFQUFNTSxHQUN2QyxJQUFJRyxFQUFRQyxFQUVaLE9BQU8sU0FBZ0JDLEVBQVFDLEdBQzdCLEdBQUlILElBQVVJLEVBQ1osTUFBTSxJQUFJQyxNQUFNLGdDQUdsQixHQUFJTCxJQUFVTSxFQUFtQixDQUMvQixHQUFlLFVBQVhKLEVBQ0YsTUFBTUMsRUFLUixPQUFPSSxJQU1ULElBSEFWLEVBQVFLLE9BQVNBLEVBQ2pCTCxFQUFRTSxJQUFNQSxJQUVELENBQ1gsSUFBSUssRUFBV1gsRUFBUVcsU0FDdkIsR0FBSUEsRUFBVSxDQUNaLElBQUlDLEVBQWlCQyxFQUFvQkYsRUFBVVgsR0FDbkQsR0FBSVksRUFBZ0IsQ0FDbEIsR0FBSUEsSUFBbUJFLEVBQWtCLFNBQ3pDLE9BQU9GLEdBSVgsR0FBdUIsU0FBbkJaLEVBQVFLLE9BR1ZMLEVBQVFlLEtBQU9mLEVBQVFnQixNQUFRaEIsRUFBUU0sU0FFbEMsR0FBdUIsVUFBbkJOLEVBQVFLLE9BQW9CLENBQ3JDLEdBQUlGLElBQVVDLEVBRVosTUFEQUQsRUFBUU0sRUFDRlQsRUFBUU0sSUFHaEJOLEVBQVFpQixrQkFBa0JqQixFQUFRTSxTQUVOLFdBQW5CTixFQUFRSyxRQUNqQkwsRUFBUWtCLE9BQU8sU0FBVWxCLEVBQVFNLEtBR25DSCxFQUFRSSxFQUVSLElBQUlZLEVBQVNDLEVBQVM1QixFQUFTRSxFQUFNTSxHQUNyQyxHQUFvQixXQUFoQm1CLEVBQU9FLEtBQW1CLENBTzVCLEdBSkFsQixFQUFRSCxFQUFRc0IsS0FDWmIsRUFDQWMsRUFFQUosRUFBT2IsTUFBUVEsRUFDakIsU0FHRixNQUFPLENBQ0w3QixNQUFPa0MsRUFBT2IsSUFDZGdCLEtBQU10QixFQUFRc0IsTUFHUyxVQUFoQkgsRUFBT0UsT0FDaEJsQixFQUFRTSxFQUdSVCxFQUFRSyxPQUFTLFFBQ2pCTCxFQUFRTSxJQUFNYSxFQUFPYixPQS9RUGtCLENBQWlCaEMsRUFBU0UsRUFBTU0sR0FFN0NGLEVBY1QsU0FBU3NCLEVBQVNLLEVBQUkxQyxFQUFLdUIsR0FDekIsSUFDRSxNQUFPLENBQUVlLEtBQU0sU0FBVWYsSUFBS21CLEVBQUdDLEtBQUszQyxFQUFLdUIsSUFDM0MsTUFBT2hCLEdBQ1AsTUFBTyxDQUFFK0IsS0FBTSxRQUFTZixJQUFLaEIsSUFoQmpDdkIsRUFBUXdCLEtBQU9BLEVBb0JmLElBQUlhLEVBQXlCLGlCQUN6Qm1CLEVBQXlCLGlCQUN6QmhCLEVBQW9CLFlBQ3BCRSxFQUFvQixZQUlwQkssRUFBbUIsR0FNdkIsU0FBU2pCLEtBQ1QsU0FBUzhCLEtBQ1QsU0FBU0MsS0FJVCxJQUFJQyxFQUFvQixHQUN4Qi9DLEVBQU8rQyxFQUFtQnJELEdBQWdCLFdBQ3hDLE9BQU9zRCxRQUdULElBQUlDLEVBQVc3RCxPQUFPOEQsZUFDbEJDLEVBQTBCRixHQUFZQSxFQUFTQSxFQUFTRyxFQUFPLE1BQy9ERCxHQUNBQSxJQUE0QmhFLEdBQzVCRyxFQUFPc0QsS0FBS08sRUFBeUJ6RCxLQUd2Q3FELEVBQW9CSSxHQUd0QixJQUFJRSxFQUFLUCxFQUEyQnpELFVBQ2xDMEIsRUFBVTFCLFVBQVlELE9BQU82QixPQUFPOEIsR0FZdEMsU0FBU08sRUFBc0JqRSxHQUM3QixDQUFDLE9BQVEsUUFBUyxVQUFVa0UsU0FBUSxTQUFTaEMsR0FDM0N2QixFQUFPWCxFQUFXa0MsR0FBUSxTQUFTQyxHQUNqQyxPQUFPd0IsS0FBSzVCLFFBQVFHLEVBQVFDLFNBa0NsQyxTQUFTZ0MsRUFBY3hDLEVBQVd5QyxHQUNoQyxTQUFTQyxFQUFPbkMsRUFBUUMsRUFBS21DLEVBQVNDLEdBQ3BDLElBQUl2QixFQUFTQyxFQUFTdEIsRUFBVU8sR0FBU1AsRUFBV1EsR0FDcEQsR0FBb0IsVUFBaEJhLEVBQU9FLEtBRUosQ0FDTCxJQUFJc0IsRUFBU3hCLEVBQU9iLElBQ2hCckIsRUFBUTBELEVBQU8xRCxNQUNuQixPQUFJQSxHQUNpQixXQUFqQixFQUFPQSxJQUNQYixFQUFPc0QsS0FBS3pDLEVBQU8sV0FDZHNELEVBQVlFLFFBQVF4RCxFQUFNMkQsU0FBU0MsTUFBSyxTQUFTNUQsR0FDdER1RCxFQUFPLE9BQVF2RCxFQUFPd0QsRUFBU0MsTUFDOUIsU0FBU3BELEdBQ1ZrRCxFQUFPLFFBQVNsRCxFQUFLbUQsRUFBU0MsTUFJM0JILEVBQVlFLFFBQVF4RCxHQUFPNEQsTUFBSyxTQUFTQyxHQUk5Q0gsRUFBTzFELE1BQVE2RCxFQUNmTCxFQUFRRSxNQUNQLFNBQVNJLEdBR1YsT0FBT1AsRUFBTyxRQUFTTyxFQUFPTixFQUFTQyxNQXZCekNBLEVBQU92QixFQUFPYixLQTRCbEIsSUFBSTBDLEVBZ0NKbEIsS0FBSzVCLFFBOUJMLFNBQWlCRyxFQUFRQyxHQUN2QixTQUFTMkMsSUFDUCxPQUFPLElBQUlWLEdBQVksU0FBU0UsRUFBU0MsR0FDdkNGLEVBQU9uQyxFQUFRQyxFQUFLbUMsRUFBU0MsTUFJakMsT0FBT00sRUFhTEEsRUFBa0JBLEVBQWdCSCxLQUNoQ0ksRUFHQUEsR0FDRUEsS0FrSFYsU0FBU3BDLEVBQW9CRixFQUFVWCxHQUNyQyxJQUFJSyxFQUFTTSxFQUFTbEMsU0FBU3VCLEVBQVFLLFFBQ3ZDLEdBQUlBLElBQVdyQyxFQUFXLENBS3hCLEdBRkFnQyxFQUFRVyxTQUFXLEtBRUksVUFBbkJYLEVBQVFLLE9BQW9CLENBRTlCLEdBQUlNLEVBQVNsQyxTQUFULFNBR0Z1QixFQUFRSyxPQUFTLFNBQ2pCTCxFQUFRTSxJQUFNdEMsRUFDZDZDLEVBQW9CRixFQUFVWCxHQUVQLFVBQW5CQSxFQUFRSyxRQUdWLE9BQU9TLEVBSVhkLEVBQVFLLE9BQVMsUUFDakJMLEVBQVFNLElBQU0sSUFBSTRDLFVBQ2hCLGtEQUdKLE9BQU9wQyxFQUdULElBQUlLLEVBQVNDLEVBQVNmLEVBQVFNLEVBQVNsQyxTQUFVdUIsRUFBUU0sS0FFekQsR0FBb0IsVUFBaEJhLEVBQU9FLEtBSVQsT0FIQXJCLEVBQVFLLE9BQVMsUUFDakJMLEVBQVFNLElBQU1hLEVBQU9iLElBQ3JCTixFQUFRVyxTQUFXLEtBQ1pHLEVBR1QsSUFBSXFDLEVBQU9oQyxFQUFPYixJQUVsQixPQUFNNkMsRUFPRkEsRUFBSzdCLE1BR1B0QixFQUFRVyxFQUFTeUMsWUFBY0QsRUFBS2xFLE1BR3BDZSxFQUFRcUQsS0FBTzFDLEVBQVMyQyxRQVFELFdBQW5CdEQsRUFBUUssU0FDVkwsRUFBUUssT0FBUyxPQUNqQkwsRUFBUU0sSUFBTXRDLEdBVWxCZ0MsRUFBUVcsU0FBVyxLQUNaRyxHQU5FcUMsR0EzQlBuRCxFQUFRSyxPQUFTLFFBQ2pCTCxFQUFRTSxJQUFNLElBQUk0QyxVQUFVLG9DQUM1QmxELEVBQVFXLFNBQVcsS0FDWkcsR0FvRFgsU0FBU3lDLEVBQWFDLEdBQ3BCLElBQUlDLEVBQVEsQ0FBRUMsT0FBUUYsRUFBSyxJQUV2QixLQUFLQSxJQUNQQyxFQUFNRSxTQUFXSCxFQUFLLElBR3BCLEtBQUtBLElBQ1BDLEVBQU1HLFdBQWFKLEVBQUssR0FDeEJDLEVBQU1JLFNBQVdMLEVBQUssSUFHeEIxQixLQUFLZ0MsV0FBV0MsS0FBS04sR0FHdkIsU0FBU08sRUFBY1AsR0FDckIsSUFBSXRDLEVBQVNzQyxFQUFNUSxZQUFjLEdBQ2pDOUMsRUFBT0UsS0FBTyxnQkFDUEYsRUFBT2IsSUFDZG1ELEVBQU1RLFdBQWE5QyxFQUdyQixTQUFTbEIsRUFBUU4sR0FJZm1DLEtBQUtnQyxXQUFhLENBQUMsQ0FBRUosT0FBUSxTQUM3Qi9ELEVBQVkwQyxRQUFRa0IsRUFBY3pCLE1BQ2xDQSxLQUFLb0MsT0FBTSxHQThCYixTQUFTaEMsRUFBT2lDLEdBQ2QsR0FBSUEsRUFBVSxDQUNaLElBQUlDLEVBQWlCRCxFQUFTM0YsR0FDOUIsR0FBSTRGLEVBQ0YsT0FBT0EsRUFBZTFDLEtBQUt5QyxHQUc3QixHQUE2QixtQkFBbEJBLEVBQVNkLEtBQ2xCLE9BQU9jLEVBR1QsSUFBS0UsTUFBTUYsRUFBU0csUUFBUyxDQUMzQixJQUFJQyxHQUFLLEVBQUdsQixFQUFPLFNBQVNBLElBQzFCLE9BQVNrQixFQUFJSixFQUFTRyxRQUNwQixHQUFJbEcsRUFBT3NELEtBQUt5QyxFQUFVSSxHQUd4QixPQUZBbEIsRUFBS3BFLE1BQVFrRixFQUFTSSxHQUN0QmxCLEVBQUsvQixNQUFPLEVBQ0wrQixFQU9YLE9BSEFBLEVBQUtwRSxNQUFRakIsRUFDYnFGLEVBQUsvQixNQUFPLEVBRUwrQixHQUdULE9BQU9BLEVBQUtBLEtBQU9BLEdBS3ZCLE1BQU8sQ0FBRUEsS0FBTTNDLEdBSWpCLFNBQVNBLElBQ1AsTUFBTyxDQUFFekIsTUFBT2pCLEVBQVdzRCxNQUFNLEdBK01uQyxPQTdtQkFLLEVBQWtCeEQsVUFBWXlELEVBQzlCOUMsRUFBT3FELEVBQUksY0FBZVAsR0FDMUI5QyxFQUFPOEMsRUFBNEIsY0FBZUQsR0FDbERBLEVBQWtCNkMsWUFBYzFGLEVBQzlCOEMsRUFDQWhELEVBQ0EscUJBYUZiLEVBQVEwRyxvQkFBc0IsU0FBU0MsR0FDckMsSUFBSUMsRUFBeUIsbUJBQVhELEdBQXlCQSxFQUFPRSxZQUNsRCxRQUFPRCxJQUNIQSxJQUFTaEQsR0FHMkIsdUJBQW5DZ0QsRUFBS0gsYUFBZUcsRUFBS0UsUUFJaEM5RyxFQUFRK0csS0FBTyxTQUFTSixHQVF0QixPQVBJeEcsT0FBTzZHLGVBQ1Q3RyxPQUFPNkcsZUFBZUwsRUFBUTlDLElBRTlCOEMsRUFBT00sVUFBWXBELEVBQ25COUMsRUFBTzRGLEVBQVE5RixFQUFtQixzQkFFcEM4RixFQUFPdkcsVUFBWUQsT0FBTzZCLE9BQU9vQyxHQUMxQnVDLEdBT1QzRyxFQUFRa0gsTUFBUSxTQUFTM0UsR0FDdkIsTUFBTyxDQUFFc0MsUUFBU3RDLElBc0VwQjhCLEVBQXNCRSxFQUFjbkUsV0FDcENXLEVBQU93RCxFQUFjbkUsVUFBV08sR0FBcUIsV0FDbkQsT0FBT29ELFFBRVQvRCxFQUFRdUUsY0FBZ0JBLEVBS3hCdkUsRUFBUW1ILE1BQVEsU0FBUzFGLEVBQVNDLEVBQVNDLEVBQU1DLEVBQWE0QyxRQUN4QyxJQUFoQkEsSUFBd0JBLEVBQWM0QyxTQUUxQyxJQUFJQyxFQUFPLElBQUk5QyxFQUNiL0MsRUFBS0MsRUFBU0MsRUFBU0MsRUFBTUMsR0FDN0I0QyxHQUdGLE9BQU94RSxFQUFRMEcsb0JBQW9CaEYsR0FDL0IyRixFQUNBQSxFQUFLL0IsT0FBT1IsTUFBSyxTQUFTRixHQUN4QixPQUFPQSxFQUFPckIsS0FBT3FCLEVBQU8xRCxNQUFRbUcsRUFBSy9CLFdBdUtqRGpCLEVBQXNCRCxHQUV0QnJELEVBQU9xRCxFQUFJdkQsRUFBbUIsYUFPOUJFLEVBQU9xRCxFQUFJM0QsR0FBZ0IsV0FDekIsT0FBT3NELFFBR1RoRCxFQUFPcUQsRUFBSSxZQUFZLFdBQ3JCLE1BQU8sd0JBa0NUcEUsRUFBUXNILEtBQU8sU0FBU0MsR0FDdEIsSUFBSUQsRUFBTyxHQUNYLElBQUssSUFBSXJHLEtBQU9zRyxFQUNkRCxFQUFLdEIsS0FBSy9FLEdBTVosT0FKQXFHLEVBQUtFLFVBSUUsU0FBU2xDLElBQ2QsS0FBT2dDLEVBQUtmLFFBQVEsQ0FDbEIsSUFBSXRGLEVBQU1xRyxFQUFLRyxNQUNmLEdBQUl4RyxLQUFPc0csRUFHVCxPQUZBakMsRUFBS3BFLE1BQVFELEVBQ2JxRSxFQUFLL0IsTUFBTyxFQUNMK0IsRUFRWCxPQURBQSxFQUFLL0IsTUFBTyxFQUNMK0IsSUFzQ1h0RixFQUFRbUUsT0FBU0EsRUFNakJqQyxFQUFROUIsVUFBWSxDQUNsQnlHLFlBQWEzRSxFQUViaUUsTUFBTyxTQUFTdUIsR0FjZCxHQWJBM0QsS0FBSzRELEtBQU8sRUFDWjVELEtBQUt1QixLQUFPLEVBR1p2QixLQUFLZixLQUFPZSxLQUFLZCxNQUFRaEQsRUFDekI4RCxLQUFLUixNQUFPLEVBQ1pRLEtBQUtuQixTQUFXLEtBRWhCbUIsS0FBS3pCLE9BQVMsT0FDZHlCLEtBQUt4QixJQUFNdEMsRUFFWDhELEtBQUtnQyxXQUFXekIsUUFBUTJCLElBRW5CeUIsRUFDSCxJQUFLLElBQUlaLEtBQVEvQyxLQUVRLE1BQW5CK0MsRUFBS2MsT0FBTyxJQUNadkgsRUFBT3NELEtBQUtJLEtBQU0rQyxLQUNqQlIsT0FBT1EsRUFBS2UsTUFBTSxNQUNyQjlELEtBQUsrQyxHQUFRN0csSUFNckI2SCxLQUFNLFdBQ0ovRCxLQUFLUixNQUFPLEVBRVosSUFDSXdFLEVBRFloRSxLQUFLZ0MsV0FBVyxHQUNMRyxXQUMzQixHQUF3QixVQUFwQjZCLEVBQVd6RSxLQUNiLE1BQU15RSxFQUFXeEYsSUFHbkIsT0FBT3dCLEtBQUtpRSxNQUdkOUUsa0JBQW1CLFNBQVMrRSxHQUMxQixHQUFJbEUsS0FBS1IsS0FDUCxNQUFNMEUsRUFHUixJQUFJaEcsRUFBVThCLEtBQ2QsU0FBU21FLEVBQU9DLEVBQUtDLEdBWW5CLE9BWEFoRixFQUFPRSxLQUFPLFFBQ2RGLEVBQU9iLElBQU0wRixFQUNiaEcsRUFBUXFELEtBQU82QyxFQUVYQyxJQUdGbkcsRUFBUUssT0FBUyxPQUNqQkwsRUFBUU0sSUFBTXRDLEtBR05tSSxFQUdaLElBQUssSUFBSTVCLEVBQUl6QyxLQUFLZ0MsV0FBV1EsT0FBUyxFQUFHQyxHQUFLLElBQUtBLEVBQUcsQ0FDcEQsSUFBSWQsRUFBUTNCLEtBQUtnQyxXQUFXUyxHQUN4QnBELEVBQVNzQyxFQUFNUSxXQUVuQixHQUFxQixTQUFqQlIsRUFBTUMsT0FJUixPQUFPdUMsRUFBTyxPQUdoQixHQUFJeEMsRUFBTUMsUUFBVTVCLEtBQUs0RCxLQUFNLENBQzdCLElBQUlVLEVBQVdoSSxFQUFPc0QsS0FBSytCLEVBQU8sWUFDOUI0QyxFQUFhakksRUFBT3NELEtBQUsrQixFQUFPLGNBRXBDLEdBQUkyQyxHQUFZQyxFQUFZLENBQzFCLEdBQUl2RSxLQUFLNEQsS0FBT2pDLEVBQU1FLFNBQ3BCLE9BQU9zQyxFQUFPeEMsRUFBTUUsVUFBVSxHQUN6QixHQUFJN0IsS0FBSzRELEtBQU9qQyxFQUFNRyxXQUMzQixPQUFPcUMsRUFBT3hDLEVBQU1HLGlCQUdqQixHQUFJd0MsR0FDVCxHQUFJdEUsS0FBSzRELEtBQU9qQyxFQUFNRSxTQUNwQixPQUFPc0MsRUFBT3hDLEVBQU1FLFVBQVUsT0FHM0IsS0FBSTBDLEVBTVQsTUFBTSxJQUFJN0YsTUFBTSwwQ0FMaEIsR0FBSXNCLEtBQUs0RCxLQUFPakMsRUFBTUcsV0FDcEIsT0FBT3FDLEVBQU94QyxFQUFNRyxnQkFVOUIxQyxPQUFRLFNBQVNHLEVBQU1mLEdBQ3JCLElBQUssSUFBSWlFLEVBQUl6QyxLQUFLZ0MsV0FBV1EsT0FBUyxFQUFHQyxHQUFLLElBQUtBLEVBQUcsQ0FDcEQsSUFBSWQsRUFBUTNCLEtBQUtnQyxXQUFXUyxHQUM1QixHQUFJZCxFQUFNQyxRQUFVNUIsS0FBSzRELE1BQ3JCdEgsRUFBT3NELEtBQUsrQixFQUFPLGVBQ25CM0IsS0FBSzRELEtBQU9qQyxFQUFNRyxXQUFZLENBQ2hDLElBQUkwQyxFQUFlN0MsRUFDbkIsT0FJQTZDLElBQ1UsVUFBVGpGLEdBQ1MsYUFBVEEsSUFDRGlGLEVBQWE1QyxRQUFVcEQsR0FDdkJBLEdBQU9nRyxFQUFhMUMsYUFHdEIwQyxFQUFlLE1BR2pCLElBQUluRixFQUFTbUYsRUFBZUEsRUFBYXJDLFdBQWEsR0FJdEQsT0FIQTlDLEVBQU9FLEtBQU9BLEVBQ2RGLEVBQU9iLElBQU1BLEVBRVRnRyxHQUNGeEUsS0FBS3pCLE9BQVMsT0FDZHlCLEtBQUt1QixLQUFPaUQsRUFBYTFDLFdBQ2xCOUMsR0FHRmdCLEtBQUt5RSxTQUFTcEYsSUFHdkJvRixTQUFVLFNBQVNwRixFQUFRMEMsR0FDekIsR0FBb0IsVUFBaEIxQyxFQUFPRSxLQUNULE1BQU1GLEVBQU9iLElBY2YsTUFYb0IsVUFBaEJhLEVBQU9FLE1BQ1MsYUFBaEJGLEVBQU9FLEtBQ1RTLEtBQUt1QixLQUFPbEMsRUFBT2IsSUFDTSxXQUFoQmEsRUFBT0UsTUFDaEJTLEtBQUtpRSxLQUFPakUsS0FBS3hCLElBQU1hLEVBQU9iLElBQzlCd0IsS0FBS3pCLE9BQVMsU0FDZHlCLEtBQUt1QixLQUFPLE9BQ2EsV0FBaEJsQyxFQUFPRSxNQUFxQndDLElBQ3JDL0IsS0FBS3VCLEtBQU9RLEdBR1AvQyxHQUdUMEYsT0FBUSxTQUFTNUMsR0FDZixJQUFLLElBQUlXLEVBQUl6QyxLQUFLZ0MsV0FBV1EsT0FBUyxFQUFHQyxHQUFLLElBQUtBLEVBQUcsQ0FDcEQsSUFBSWQsRUFBUTNCLEtBQUtnQyxXQUFXUyxHQUM1QixHQUFJZCxFQUFNRyxhQUFlQSxFQUd2QixPQUZBOUIsS0FBS3lFLFNBQVM5QyxFQUFNUSxXQUFZUixFQUFNSSxVQUN0Q0csRUFBY1AsR0FDUDNDLElBS2IsTUFBUyxTQUFTNEMsR0FDaEIsSUFBSyxJQUFJYSxFQUFJekMsS0FBS2dDLFdBQVdRLE9BQVMsRUFBR0MsR0FBSyxJQUFLQSxFQUFHLENBQ3BELElBQUlkLEVBQVEzQixLQUFLZ0MsV0FBV1MsR0FDNUIsR0FBSWQsRUFBTUMsU0FBV0EsRUFBUSxDQUMzQixJQUFJdkMsRUFBU3NDLEVBQU1RLFdBQ25CLEdBQW9CLFVBQWhCOUMsRUFBT0UsS0FBa0IsQ0FDM0IsSUFBSW9GLEVBQVN0RixFQUFPYixJQUNwQjBELEVBQWNQLEdBRWhCLE9BQU9nRCxHQU1YLE1BQU0sSUFBSWpHLE1BQU0sMEJBR2xCa0csY0FBZSxTQUFTdkMsRUFBVWYsRUFBWUUsR0FhNUMsT0FaQXhCLEtBQUtuQixTQUFXLENBQ2RsQyxTQUFVeUQsRUFBT2lDLEdBQ2pCZixXQUFZQSxFQUNaRSxRQUFTQSxHQUdTLFNBQWhCeEIsS0FBS3pCLFNBR1B5QixLQUFLeEIsSUFBTXRDLEdBR044QyxJQVFKL0MsRUE5c0JNLENBcXRCSyxXQUFsQixFLFlBQTZCNEksRUFBTzVJLFFBQVUsSUFHaEQsSUFDRTZJLG1CQUFxQjlJLEVBQ3JCLE1BQU8rSSxHQVdtQixZQUF0QixvQkFBT0MsV0FBUCxjQUFPQSxhQUNUQSxXQUFXRixtQkFBcUI5SSxFQUVoQ2lKLFNBQVMsSUFBSyx5QkFBZEEsQ0FBd0NqSixNQzl1QnhDa0osRUFBMkIsR0FHL0IsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQmxKLElBQWpCbUosRUFDSCxPQUFPQSxFQUFhcEosUUFHckIsSUFBSTRJLEVBQVNLLEVBQXlCRSxHQUFZLENBQ2pERSxHQUFJRixFQUNKRyxRQUFRLEVBQ1J0SixRQUFTLElBVVYsT0FOQXVKLEVBQW9CSixHQUFVUCxFQUFRQSxFQUFPNUksUUFBU2tKLEdBR3RETixFQUFPVSxRQUFTLEVBR1RWLEVBQU81SSxRQ3hCZmtKLEVBQW9CTSxJQUFNLFNBQVNaLEdBR2xDLE9BRkFBLEVBQU9hLE1BQVEsR0FDVmIsRUFBT2MsV0FBVWQsRUFBT2MsU0FBVyxJQUNqQ2QsRyx5TUNGYWUsRUFBQUEsV0FDakIsV0FBWUMsRUFBTUMsRUFBTUMsRUFBa0JDLEVBQWlCQyxFQUFLQyxFQUFpQkMsSSw0RkFBZSxTQUM1Rm5HLEtBQUtvRyxNQUFRUCxFQUFLOUMsS0FDbEIvQyxLQUFLcUcsTUFBUVIsRUFBS1MsS0FDbEJ0RyxLQUFLdUcsUUFBVVYsRUFBS1csSUFDcEJ4RyxLQUFLeUcsV0FBYVosRUFBS2EsTUFBTTNELEtBQzdCL0MsS0FBSzJHLFNBQVdkLEVBQUthLE1BQU1GLElBQzNCeEcsS0FBSzRHLE1BQVFkLEVBQ2I5RixLQUFLNkcsWUFBY2hCLEVBQUtpQixNQUN4QjlHLEtBQUsrRyxZQUFjbEIsRUFBS2lCLE1BQU10RSxPQUU5QnhDLEtBQUtnSCxTQUFVLEVBQ2ZoSCxLQUFLaUgsU0FBV2xCLEVBQWlCbUIsY0FBYyx1QkFBdUJDLFdBQVUsR0FDaEZuSCxLQUFLb0gsV0FBYXBILEtBQUtpSCxTQUFTQyxjQUFjLHdCQUM5Q2xILEtBQUtxSCxhQUFlckgsS0FBS2lILFNBQVNDLGNBQWMsc0JBQ2hEbEgsS0FBS3NILGdCQUFrQnRILEtBQUtpSCxTQUFTQyxjQUFjLHVCQUNuRGxILEtBQUt1SCxXQUFhdkgsS0FBS2lILFNBQVNDLGNBQWMsd0JBQzlDbEgsS0FBS3dILGtCQUFvQnhILEtBQUtpSCxTQUFTQyxjQUFjLHlCQUNyRGxILEtBQUt5SCxlQUFpQnRCLEVBRXRCbkcsS0FBSzBILEtBQU96QixFQUNaakcsS0FBSzJILGlCQUFtQjNCLEVBQ3hCaEcsS0FBSzRILGlCQUFtQjFCLEUsdURBRzVCLFdBQXFCLFdBRWpCbEcsS0FBS3NILGdCQUFnQk8saUJBQWlCLFNBQVMsU0FBQUMsR0FDdEMsRUFBS2QsU0FRTmMsRUFBTUMsT0FBT0MsVUFBVUMsT0FBTyw2QkFDOUIsRUFBS2pCLFNBQVUsRUFDZixFQUFLVSxLQUFLUSxRQUFRLEVBQUszQixTQUNsQnhGLE1BQUssU0FBQW9ILEdBQ0YsRUFBS1osV0FBV2EsWUFBY0QsRUFBS3JCLE1BQU10RSxZQVhqRHNGLEVBQU1DLE9BQU9DLFVBQVVLLElBQUksNkJBQzNCLEVBQUtyQixTQUFVLEVBQ2YsRUFBS1UsS0FBS1ksS0FBSyxFQUFLL0IsU0FDZnhGLE1BQUssU0FBQW9ILEdBQ0YsRUFBS1osV0FBV2EsWUFBY0QsRUFBS3JCLE1BQU10RSxjQWF6RHhDLEtBQUt3SCxrQkFBa0JLLGlCQUFpQixTQUFTLFdBQzdDLEVBQUtELGlCQUFpQlcsT0FDdEIsRUFBS1gsaUJBQWlCWSxvQkFDdEIsRUFBS2YsZUFBZUksaUJBQWlCLFNBQVMsV0FDMUMsRUFBS0gsS0FBS2UsV0FBVyxFQUFLbEMsU0FDckJ4RixNQUFLLFdBQ0YsRUFBS2tHLFNBQVNnQixTQUNkLEVBQUtoQixTQUFXLEtBQ2hCLEVBQUtXLGlCQUFpQmMsUUFDdEIsRUFBS2pCLGVBQWVrQixvQkFBb0IsUUFBUyxFQUFLQyxzQkFNdEU1SSxLQUFLaUgsU0FBU0MsY0FBYyxzQkFBc0JXLGlCQUFpQixTQUFTLFNBQUFDLEdBQ3hFLElBQU1lLEVBQVMsRUFBS2hDLFlBQVlpQyxLQUFJLFNBQUNDLEdBQ2pDLE1BQU8sSUFBSUEsRUFBUWhHLFFBRWpCaUcsRUFBTyxFQUFLNUMsTUFBTSxPQUFPLEVBQUtLLFdBQVcsY0FBY29DLEVBQzdELEVBQUtsQixpQkFBaUIsRUFBS3RCLE1BQU8yQyxRLDJCQUkxQyxXQUFnQixXQUNaaEosS0FBSzZHLFlBQVl0RyxTQUFRLFNBQUF3SSxHQUNqQkEsRUFBUXZDLE1BQVEsRUFBS0ksUUFDckIsRUFBS1UsZ0JBQWdCVSxVQUFVSyxJQUFJLDZCQUNuQyxFQUFLckIsU0FBVSxRLDZCQUszQixXQUNRaEgsS0FBSzJHLFdBQWEzRyxLQUFLNEcsT0FDdkI1RyxLQUFLd0gsa0JBQWtCUSxVQUFVQyxPQUFPLG1DLDRCQUloRCxXQUNJakksS0FBS29ILFdBQVdnQixZQUFjcEksS0FBS29HLE1BQ25DcEcsS0FBS3FILGFBQWE0QixJQUFNakosS0FBS3FHLE1BQzdCckcsS0FBS3FILGFBQWE2QixJQUFNbEosS0FBS29HLE1BQzdCcEcsS0FBS3VILFdBQVdhLFlBQWNwSSxLQUFLK0csWUFDbkMvRyxLQUFLbUosZ0JBQ0xuSixLQUFLb0osb0Isd0JBSVQsV0FHSSxPQUZBcEosS0FBS3FKLGlCQUNMckosS0FBS3NKLHFCQUNFdEosS0FBS2lILGMsbUJBbEdDckIsRywwS0NEQTJELEVBQUFBLFdBQ25CLFdBQVlDLEVBQVVDLEksNEZBQWEsU0FDakN6SixLQUFLMEosY0FBZ0JGLEVBQVNHLGFBQzlCM0osS0FBSzRKLGVBQWlCSixFQUFTSyxjQUMvQjdKLEtBQUs4SixzQkFBd0JOLEVBQVNPLHFCQUN0Qy9KLEtBQUtnSyxxQkFBdUJSLEVBQVNTLG9CQUNyQ2pLLEtBQUtrSyxpQkFBbUJWLEVBQVNXLGdCQUNqQ25LLEtBQUtvSyxZQUFjWixFQUFTYSxXQUU1QnJLLEtBQUtzSyxhQUFlYixFQUNwQnpKLEtBQUt1SyxhQUFlQyxNQUFNQyxLQUFLekssS0FBS3NLLGFBQWFJLGlCQUFpQjFLLEtBQUs0SixpQkFDdkU1SixLQUFLMkssZUFBaUJsQixFQUFZdkMsY0FBY3NDLEVBQVNPLHNCLHlEQUczRCxXQUNFL0osS0FBSzJLLGVBQWUzQyxVQUFVSyxJQUFJckksS0FBS2dLLHNCQUN2Q2hLLEtBQUsySyxlQUFlQyxhQUFhLFdBQVksTSxpQ0FHL0MsV0FDRTVLLEtBQUsySyxlQUFlM0MsVUFBVUMsT0FBT2pJLEtBQUtnSyxzQkFDMUNoSyxLQUFLMkssZUFBZUUsZ0JBQWdCLFdBQVksTSxnQ0FHbEQsV0FDMEI3SyxLQUFLdUssYUFBYU8sTUFBSyxTQUFBQyxHQUFVLE9BQUtBLEVBQVdDLFNBQVNDLFNBR2hGakwsS0FBS2tMLHFCQUFxQmxMLEtBQUsySyxnQkFFL0IzSyxLQUFLbUwsb0JBQW9CbkwsS0FBSzJLLGtCLDZCQUlsQyxTQUFnQkksRUFBWUssR0FDMUJMLEVBQVcvQyxVQUFVSyxJQUFJckksS0FBS2tLLGtCQUM5QmtCLEVBQWFoRCxZQUFjMkMsRUFBV00sa0JBQ3RDRCxFQUFhcEQsVUFBVUssSUFBSXJJLEtBQUtvSyxlLDZCQUdsQyxTQUFnQlcsRUFBWUssR0FDMUJMLEVBQVcvQyxVQUFVQyxPQUFPakksS0FBS2tLLGtCQUNqQ2tCLEVBQWFoRCxZQUFjLEdBQzNCZ0QsRUFBYXBELFVBQVVDLE9BQU9qSSxLQUFLb0ssZSxpQ0FHckMsU0FBb0JXLEdBQ2xCLElBQU1LLEVBQWVwTCxLQUFLc0ssYUFBYXBELGNBQWxCLFdBQW9DNkQsRUFBV3pGLEdBQS9DLFdBRWpCeUYsRUFBV0MsU0FBU0MsTUFDdEJqTCxLQUFLc0wsZ0JBQWdCUCxFQUFZSyxHQUVqQ3BMLEtBQUt1TCxnQkFBZ0JSLEVBQVlLLEssZ0NBSXJDLFdBQXFCLFdBQ25CcEwsS0FBS3VLLGFBQWFoSyxTQUFRLFNBQUF3SyxHQUN4QkEsRUFBV2xELGlCQUFpQixTQUFTLFdBQ25DLEVBQUsyRCxvQkFBb0JULEdBQ3pCLEVBQUtVLG1CQUFtQixFQUFLbEIsYUFBYyxFQUFLSSx3Qiw2QkFLdEQsV0FBa0IsV0FDaEIzSyxLQUFLa0wsdUJBQ0xsTCxLQUFLdUssYUFBYWhLLFNBQVEsU0FBQXdLLEdBQ3hCLElBQU1LLEVBQWUsRUFBS2QsYUFBYXBELGNBQWxCLFdBQW9DNkQsRUFBV3pGLEdBQS9DLFdBQ3JCLEVBQUtnRyxnQkFBZ0JQLEVBQVlLLFEsOEJBSXJDLFdBQ0VwTCxLQUFLc0osMEIsbUJBMUVZQyxHLDBLQ0FBbUMsRUFBQUEsV0FDakIsYyw0RkFBYyxTQUNWMUwsS0FBSzJMLFVBQVlDLFNBQVMxRSxjQUFjLG1CQUN4Q2xILEtBQUs2TCxTQUFXRCxTQUFTMUUsY0FBYyxzQkFDdkNsSCxLQUFLOEwsWUFBY0YsU0FBUzFFLGNBQWMscUIsZ0RBRzlDLFdBQ0ksTUFBTyxDQUFFbkUsS0FBTS9DLEtBQUsyTCxVQUFVdkQsWUFBYTJELElBQUsvTCxLQUFLNkwsU0FBU3pELGUseUJBR2xFLFNBQVlyRixFQUFNZ0osR0FDZC9MLEtBQUsyTCxVQUFVdkQsWUFBY3JGLEVBQzdCL0MsS0FBSzZMLFNBQVN6RCxZQUFjMkQsSSwyQkFHaEMsU0FBY3pGLEdBQ1Z0RyxLQUFLOEwsWUFBWTdDLElBQU0zQyxPLG1CQWpCVm9GLEcsb1JDQUFNLEVBQUFBLFdBQ2pCLFdBQVlDLEdBQWUsWSw0RkFBQSxTQUN2QmpNLEtBQUtrTSxXQUFhTixTQUFTMUUsY0FBYytFLEdBQ3pDak0sS0FBS21NLGtCQUFvQm5NLEtBQUtrTSxXQUFXaEYsY0FBYyxpQkFDdkRsSCxLQUFLb00sZUFBaUIsU0FBQ3RFLEdBQ0QsV0FBZEEsRUFBTTVLLEtBQ04sRUFBS3dMLFMseUNBSWpCLFdBRUlrRCxTQUFTL0QsaUJBQWlCLFFBQVM3SCxLQUFLb00sZ0JBRXhDcE0sS0FBS2tNLFdBQVdsRSxVQUFVSyxJQUFJLHFCLG1CQUdsQyxXQUVJdUQsU0FBU2pELG9CQUFvQixRQUFTM0ksS0FBS29NLGdCQUUzQ3BNLEtBQUtrTSxXQUFXbEUsVUFBVUMsT0FBTyxxQiwrQkFHckMsV0FBb0IsV0FFaEJqSSxLQUFLbU0sa0JBQWtCdEUsaUJBQWlCLFNBQVMsU0FBQ0MsR0FDOUMsRUFBS1ksUUFDTFosRUFBTXVFLDhCQUlWck0sS0FBS2tNLFdBQVdyRSxpQkFBaUIsYUFBYSxTQUFDQyxHLFNBQ25DQSxFQUFNQyxPQUFPQyxVLGtuQkFBV3NFLFNBQVMsVUFDckMsRUFBSzVELFFBQ1RaLEVBQU11RSxtQyxtQkFuQ0dMLEcsK3RDQ0VBTyxFQUFBQSxTQUFBQSxJLDBvQkFDakIsV0FBWUMsRUFBWVAsR0FBZSxhLDRGQUFBLFVBQ25DLGNBQU1BLElBQ0RRLFlBQWNELEVBQ25CLEVBQUtFLFlBQWMsR0FDbkIsRUFBS3BDLGFBQWUsRUFBSzRCLFdBQVdoRixjQUFjLFNBQ2xELEVBQUt5RixZQUFjLEVBQUtULFdBQVd4QixpQkFBaUIsZ0JBTGpCLEUsa0NBUXZDLFdBQ0kxSyxLQUFLc0ssYUFBYWxJLFFBQ2xCLDRDLDZCQUdKLFdBQWtCLFdBQ2RwQyxLQUFLMk0sWUFBWXBNLFNBQVEsU0FBQXFNLEdBQ3JCLEVBQUtGLFlBQVlFLEVBQU03SixNQUFRNkosRUFBTXpQLFcsK0JBSTdDLFdBQW9CLFdBRWhCNkMsS0FBS2tNLFdBQVdyRSxpQkFBaUIsVUFBVSxTQUFDQyxHQUN4QyxFQUFLK0Usa0JBQ0wsRUFBS0osWUFBWTNFLEVBQU8sRUFBSzRFLGFBQzdCNUUsRUFBTXVFLDhCQUdWLDJELG1CQTVCYUUsQ0FBc0JQLEcsK3RDQ0F0QmMsRUFBQUEsU0FBQUEsSSwwb0JBQ2pCLFdBQWFiLEdBQWUsYSw0RkFBQSxVQUN4QixjQUFNQSxJQUNEYyxZQUFjbkIsU0FBUzFFLGNBQWMsOEJBQzFDLEVBQUs4RixXQUFhcEIsU0FBUzFFLGNBQWMsd0JBSGpCLEUsaUNBTzVCLFNBQUtaLEVBQU0wQyxHQUNQaEosS0FBS2dOLFdBQVdwQyxhQUFhLE1BQU90RSxHQUNwQ3RHLEtBQUtnTixXQUFXcEMsYUFBYSxNQUFPNUIsR0FDcENoSixLQUFLK00sWUFBWTNFLFlBQWNZLEVBQy9CLDhDLG1CQVphOEQsQ0FBdUJkLEcsMEtDRnZCaUIsRUFBQUEsV0FDakIsYUFBMEJDLEdBQWUsSUFBM0JDLEVBQTJCLEVBQTNCQSxVLDRGQUEyQixTQUNyQ25OLEtBQUtvTixVQUFZRCxFQUNqQm5OLEtBQUtxTixnQkFBa0J6QixTQUFTMUUsY0FBY2dHLEcsNENBR2xELFNBQVFJLEVBQU14SCxHQUNWOUYsS0FBS3FOLGdCQUFnQkUsUUFBUXZOLEtBQUtvTixVQUFVRSxFQUFNeEgsTSx1QkFHdEQsU0FBVTBILEVBQU8xSCxHQUFNLFdBQ25CMEgsRUFBTWpOLFNBQVEsU0FBQStNLEdBQ1YsRUFBS0csUUFBUUgsRUFBTXhILFcsbUJBWlZtSCxHLDBLQ0FBUyxFQUFBQSxXQUNqQixXQUFZQyxJLDRGQUFTLFNBQ2pCM04sS0FBSzROLEtBQU9ELEVBQVFFLFFBQ3BCN04sS0FBSzhOLE9BQVNILEVBQVFJLE0sZ0RBRzFCLFdBQ0ksT0FBT0MsTUFBTSxHQUFELE9BQUloTyxLQUFLNE4sS0FBVCxhQUEwQixDQUNsQ0ssUUFBUyxDQUFFQyxjQUFlbE8sS0FBSzhOLFVBRWxDL00sTUFBSyxTQUFDb04sR0FDSCxPQUFJQSxFQUFJQyxHQUNHRCxFQUFJRSxPQUVKaEwsUUFBUXpDLE9BQVIsaUJBQXlCdU4sRUFBSUcsWUFHM0NDLE9BQU0sU0FBQy9RLEdBQ0pnUixRQUFRQyxJQUFJLFVBQVdqUixFQUFJOFEsT0FBUTlRLEVBQUlrUixpQixzQkFJL0MsV0FDSSxPQUFPVixNQUFNLEdBQUQsT0FBSWhPLEtBQUs0TixLQUFULFVBQXVCLENBQy9CSyxRQUFTLENBQUVDLGNBQWVsTyxLQUFLOE4sVUFFbEMvTSxNQUFLLFNBQUNvTixHQUNILE9BQUlBLEVBQUlDLEdBQ0dELEVBQUlFLE9BRUpoTCxRQUFRekMsT0FBUixpQkFBeUJ1TixFQUFJRyxZQUczQ0MsT0FBTSxTQUFDL1EsR0FDSmdSLFFBQVFDLElBQUksVUFBV2pSLEVBQUk4USxPQUFROVEsRUFBSWtSLGlCLHlCQUkvQyxTQUFZM0wsRUFBTTRMLEdBQ2QsT0FBT1gsTUFBTSxHQUFELE9BQUloTyxLQUFLNE4sS0FBVCxhQUEwQixDQUNsQ3JQLE9BQVEsUUFDUjBQLFFBQVMsQ0FDTEMsY0FBZWxPLEtBQUs4TixPQUNwQixlQUFnQixvQkFFcEJjLEtBQU1DLEtBQUtDLFVBQVUsQ0FDakIvTCxLQUFNQSxFQUNONEwsTUFBT0EsTUFHZDVOLE1BQUssU0FBQ29OLEdBQ0gsT0FBSUEsRUFBSUMsR0FDR0QsRUFBSUUsT0FFSmhMLFFBQVF6QyxPQUFSLGlCQUF5QnVOLEVBQUlHLFlBRzNDQyxPQUFNLFNBQUMvUSxHQUNKdVIsT0FBT0MsTUFBTSxzREFDYlIsUUFBUUMsSUFBSSxVQUFXalIsRUFBSThRLE9BQVE5USxFQUFJa1IsaUIsa0NBSS9DLFNBQXFCcEksR0FDakIsT0FBTzBILE1BQU0sR0FBRCxPQUFJaE8sS0FBSzROLEtBQVQsb0JBQWlDLENBQ3pDclAsT0FBUSxRQUNSMFAsUUFBUyxDQUNMQyxjQUFlbE8sS0FBSzhOLE9BQ3BCLGVBQWdCLG9CQUVwQmMsS0FBTUMsS0FBS0MsVUFBVSxDQUNqQkcsT0FBUTNJLE1BR1h2RixNQUFLLFNBQUNvTixHQUNILE9BQUlBLEVBQUlDLEdBQ0dELEVBQUlFLE9BRUpoTCxRQUFRekMsT0FBUixpQkFBeUJ1TixFQUFJRyxZQUczQ0MsT0FBTSxTQUFDL1EsR0FDSnVSLE9BQU9DLE1BQU0sc0RBQ2JSLFFBQVFDLElBQUksVUFBV2pSLEVBQUk4USxPQUFROVEsRUFBSWtSLGlCLHFCQUluRCxTQUFRM0wsRUFBTXVELEdBQ1YsT0FBTzBILE1BQU0sR0FBRCxPQUFJaE8sS0FBSzROLEtBQVQsVUFBdUIsQ0FDL0JyUCxPQUFRLE9BQ1IwUCxRQUFTLENBQ0xDLGNBQWVsTyxLQUFLOE4sT0FDcEIsZUFBZ0Isb0JBRXBCYyxLQUFNQyxLQUFLQyxVQUFVLENBQ2pCL0wsS0FBTUEsRUFDTnVELEtBQU1BLE1BR2J2RixNQUFLLFNBQUNvTixHQUNILE9BQUlBLEVBQUlDLEdBQ0dELEVBQUlFLE9BRUpoTCxRQUFRekMsT0FBUixpQkFBeUJ1TixFQUFJRyxZQUczQ0MsT0FBTSxTQUFDL1EsR0FDSnVSLE9BQU9DLE1BQU0sc0RBQ2JSLFFBQVFDLElBQUksVUFBV2pSLEVBQUk4USxPQUFROVEsRUFBSWtSLGlCLHdCQUkvQyxTQUFXcEosR0FDUCxPQUFPMEksTUFBTSxHQUFELE9BQUloTyxLQUFLNE4sS0FBVCxrQkFBdUJ0SSxHQUFNLENBQ3JDL0csT0FBUSxTQUNSMFAsUUFBUyxDQUFFQyxjQUFlbE8sS0FBSzhOLFVBRWxDL00sTUFBSyxTQUFDb04sR0FDSCxPQUFJQSxFQUFJQyxHQUNHRCxFQUFJRSxPQUVKaEwsUUFBUXpDLE9BQVIsaUJBQXlCdU4sRUFBSUcsWUFHM0NDLE9BQU0sU0FBQy9RLEdBQ0pnUixRQUFRQyxJQUFJLFVBQVdqUixFQUFJOFEsT0FBUTlRLEVBQUlrUixpQixrQkFJL0MsU0FBS3BKLEdBQ0QsT0FBTzBJLE1BQU0sR0FBRCxPQUFJaE8sS0FBSzROLEtBQVQsd0JBQTZCdEksR0FBTSxDQUMzQy9HLE9BQVEsTUFDUjBQLFFBQVMsQ0FDTEMsY0FBZWxPLEtBQUs4TixVQUczQi9NLE1BQUssU0FBQ29OLEdBQ0gsT0FBSUEsRUFBSUMsR0FDR0QsRUFBSUUsT0FFSmhMLFFBQVF6QyxPQUFSLGlCQUF5QnVOLEVBQUlHLFlBRzNDQyxPQUFNLFNBQUMvUSxHQUNKZ1IsUUFBUUMsSUFBSSxVQUFXalIsRUFBSThRLE9BQVE5USxFQUFJa1IsaUIscUJBSS9DLFNBQVFwSixHQUNKLE9BQU8wSSxNQUFNLEdBQUQsT0FBSWhPLEtBQUs0TixLQUFULHdCQUE2QnRJLEdBQU0sQ0FDM0MvRyxPQUFRLFNBQ1IwUCxRQUFTLENBQ0xDLGNBQWVsTyxLQUFLOE4sVUFHM0IvTSxNQUFLLFNBQUNvTixHQUNILE9BQUlBLEVBQUlDLEdBQ0dELEVBQUlFLE9BRUpoTCxRQUFRekMsT0FBUixpQkFBeUJ1TixFQUFJRyxZQUczQ0MsT0FBTSxTQUFDL1EsR0FDSmdSLFFBQVFDLElBQUksVUFBV2pSLEVBQUk4USxPQUFROVEsRUFBSWtSLG9CLG1CQW5LOUJoQixHLCt0Q0NFQXdCLEVBQUFBLFNBQUFBLEksMG9CQUNqQixXQUFZakQsR0FBZSxPLDRGQUFBLHFCQUNqQkEsRyw4Q0FHVixXQUNJLDJELG1CQU5haUQsQ0FBOEJsRCxHQ0R0Q3hDLEVBQVcsQ0FDdEJHLGFBQWMsUUFDZEUsY0FBZSxlQUNmRSxxQkFBc0IsZ0JBQ3RCRSxvQkFBcUIsd0JBQ3JCRSxnQkFBaUIseUJBQ2pCRSxXQUFZLHVCQThCRDhFLEVBQW9CdkQsU0FBUzFFLGNBQWMseUJBQzNDa0ksRUFBbUJ4RCxTQUFTMUUsY0FBYywwQkFDMUNtSSxFQUFvQnpELFNBQVMxRSxjQUFjLDJCQUMzQ29JLEVBQWdCMUQsU0FBUzFFLGNBQWMscUJBQ3ZDcUksRUFBZ0IzRCxTQUFTMUUsY0FBYyx3QkFDdkNzSSxFQUFlNUQsU0FBUzFFLGNBQWMsa0JBQWtCdUksUUFDeER0SixFQUFnQnlGLFNBQVMxRSxjQUFjLDhCQUN2Q3dJLEVBQXNCOUQsU0FBUzFFLGNBQWMsOEJBQzdDeUksRUFBcUIvRCxTQUFTMUUsY0FBYyw2QkFDNUMwSSxFQUFtQmhFLFNBQVMxRSxjQUFjLDJCQzVCMUNqQixFQUFNLElBQUl5SCxFQUFJLENBQ3pCRyxRQUFTLDhDQUNURSxNQUFPLHlDQUVIOEIsRUFBdUIsSUFBSXRHLEVBQWNDLEVBQVVvQyxTQUFTMUUsY0FBYyx1QkFDMUU0SSxFQUFvQixJQUFJdkcsRUFBY0MsRUFBVW9DLFNBQVMxRSxjQUFjLG9CQUN2RTZJLEVBQXNCLElBQUl4RyxFQUFjQyxFQUFVb0MsU0FBUzFFLGNBQWMsc0JBRXpFOEksRUFBc0IsSUFBSXpELEdBV3pCLFNBQTJCekUsRUFBT21JLEdBQ3ZDbkksRUFBTW9JLGlCQUNOUixFQUFvQnRILFlBQWMsWUFDbENuQyxFQUFJa0ssWUFBWUYsRUFBV0csYUFBY0gsRUFBV0ksYUFDakR0UCxNQUFLLFNBQUF1UCxHQUNKQyxHQUFTQyxZQUFZRixFQUFRdk4sS0FBTXVOLEVBQVEzQixPQUMzQ3FCLEVBQW9CdEgsUUFDcEJnSCxFQUFvQnRILFlBQWMsWUFsQnlCLHVCQUMzRHFJLEdBQW1CLElBQUlsRSxHQWtDN0IsU0FBd0J6RSxFQUFPbUksR0FDN0JuSSxFQUFNb0ksaUJBQ05OLEVBQWlCeEgsWUFBYyxZQUMvQm5DLEVBQUl5SyxjQUNEM1AsTUFBSyxTQUFBOEUsR0FDSkksRUFBSTBLLFFBQVFWLEVBQVdXLFdBQVlYLEVBQVdZLFdBQzNDOVAsTUFBSyxTQUFBb0gsR0FDSjJJLEdBQWNyRCxRQUFRdEYsRUFBTXRDLEVBQUtXLEtBQ2pDb0osRUFBaUJ4SCxZQUFjLFNBQy9CcUksR0FBaUIvSCxnQkEzQ2dDLG9CQUNyRHFJLEdBQXFCLElBQUl4RSxHQXFCL0IsU0FBMEJ6RSxFQUFPbUksR0FDL0JuSSxFQUFNb0ksaUJBQ05QLEVBQW1CdkgsWUFBYyxZQUNqQ25DLEVBQUkrSyxxQkFBcUJmLEVBQVdnQixhQUNqQ2xRLE1BQUssU0FBQXVQLEdBQ0pDLEdBQVNXLGNBQWNaLEVBQVFyQixRQUMvQjhCLEdBQW1CckksUUFDbkJpSCxFQUFtQnZILFlBQWMsWUE1QndCLHNCQUV6RDBJLEdBQWdCLElBQUk3RCxFQUFRLENBQUVFLFNBNkNwQyxTQUEwQmdFLEVBQVVyTCxHQUVsQyxPQURhLElBQUlGLEVBQUt1TCxFQUFVckwsRUFBTTBKLEVBQWN4SixHQUFpQkMsRUFBS0MsR0FBaUJDLEdBQy9FaUwsZUEvQ29ELGlCQUM1RGIsR0FBVyxJQUFJN0UsRUFDZjJGLEdBQXVCLElBQUl2RSxFQUFlLHVCQUMxQzVHLEdBQWtCLElBQUlnSixFQUFzQix1QkErQ2xELFNBQVNsSixHQUFnQk0sRUFBTTBDLEdBQzdCcUksR0FBcUI5SSxLQUFLakMsRUFBTTBDLEdBbUJsQ21HLEVBQWtCdEgsaUJBQWlCLFNBQVMsV0FDMUMsTUFBc0IwSSxHQUFTZSxjQUF2QnZPLEVBQVIsRUFBUUEsS0FBTWdKLEVBQWQsRUFBY0EsSUFDZHFELEVBQWlCalMsTUFBUTRGLEVBQ3pCc00sRUFBa0JsUyxNQUFRNE8sRUFDMUI4RCxFQUFxQjBCLGtCQUNyQjdCLEVBQW9CdEgsWUFBYyxPQUNsQzRILEVBQW9CekgsVUFLdEJnSCxFQUFjMUgsaUJBQWlCLFNBQVMsV0FDdENpSSxFQUFrQnlCLGtCQUNsQjNCLEVBQWlCeEgsWUFBYyxTQUMvQnFJLEdBQWlCbEksVUFJbkIrRyxFQUFjekgsaUJBQWlCLFNBQVMsV0FDdENrSSxFQUFvQndCLGtCQUNwQjVCLEVBQW1CdkgsWUFBYyxPQUNqQzJJLEdBQW1CeEksVUFJckJ3RyxPQUFPeUMsT0FBUyxXQWxDZHZMLEVBQUl5SyxjQUFjM1AsTUFBSyxTQUFBOEUsR0FQekIsSUFBNkJDLEVBUXpCeUssR0FBU0MsWUFBWTNLLEVBQUs5QyxLQUFNOEMsRUFBSzhJLE9BQ3JDNEIsR0FBU1csY0FBY3JMLEVBQUtvSixRQVRIbkosRUFVTEQsRUFBS1csSUFUM0JQLEVBQUl3TCxXQUFXMVEsTUFBSyxTQUFBMlEsR0FDbEJaLEdBQWNhLFVBQVVELEVBQU81TCxTQTRDakNnSyxFQUFrQjhCLG1CQUNsQi9CLEVBQXFCK0IsbUJBQ3JCN0IsRUFBb0I2QixtQkFHcEJQLEdBQXFCN0ksb0JBQ3JCd0gsRUFBb0J4SCxvQkFDcEJpSSxHQUFpQmpJLG9CQUNqQnVJLEdBQW1CdkkscUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vbm9kZV9tb2R1bGVzL3JlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ydW50aW1lL25vZGUgbW9kdWxlIGRlY29yYXRvciIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxudmFyIHJ1bnRpbWUgPSAoZnVuY3Rpb24gKGV4cG9ydHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIE9wID0gT2JqZWN0LnByb3RvdHlwZTtcbiAgdmFyIGhhc093biA9IE9wLmhhc093blByb3BlcnR5O1xuICB2YXIgdW5kZWZpbmVkOyAvLyBNb3JlIGNvbXByZXNzaWJsZSB0aGFuIHZvaWQgMC5cbiAgdmFyICRTeW1ib2wgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgPyBTeW1ib2wgOiB7fTtcbiAgdmFyIGl0ZXJhdG9yU3ltYm9sID0gJFN5bWJvbC5pdGVyYXRvciB8fCBcIkBAaXRlcmF0b3JcIjtcbiAgdmFyIGFzeW5jSXRlcmF0b3JTeW1ib2wgPSAkU3ltYm9sLmFzeW5jSXRlcmF0b3IgfHwgXCJAQGFzeW5jSXRlcmF0b3JcIjtcbiAgdmFyIHRvU3RyaW5nVGFnU3ltYm9sID0gJFN5bWJvbC50b1N0cmluZ1RhZyB8fCBcIkBAdG9TdHJpbmdUYWdcIjtcblxuICBmdW5jdGlvbiBkZWZpbmUob2JqLCBrZXksIHZhbHVlKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gb2JqW2tleV07XG4gIH1cbiAgdHJ5IHtcbiAgICAvLyBJRSA4IGhhcyBhIGJyb2tlbiBPYmplY3QuZGVmaW5lUHJvcGVydHkgdGhhdCBvbmx5IHdvcmtzIG9uIERPTSBvYmplY3RzLlxuICAgIGRlZmluZSh7fSwgXCJcIik7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGRlZmluZSA9IGZ1bmN0aW9uKG9iaiwga2V5LCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIG9ialtrZXldID0gdmFsdWU7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpIHtcbiAgICAvLyBJZiBvdXRlckZuIHByb3ZpZGVkIGFuZCBvdXRlckZuLnByb3RvdHlwZSBpcyBhIEdlbmVyYXRvciwgdGhlbiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvci5cbiAgICB2YXIgcHJvdG9HZW5lcmF0b3IgPSBvdXRlckZuICYmIG91dGVyRm4ucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yID8gb3V0ZXJGbiA6IEdlbmVyYXRvcjtcbiAgICB2YXIgZ2VuZXJhdG9yID0gT2JqZWN0LmNyZWF0ZShwcm90b0dlbmVyYXRvci5wcm90b3R5cGUpO1xuICAgIHZhciBjb250ZXh0ID0gbmV3IENvbnRleHQodHJ5TG9jc0xpc3QgfHwgW10pO1xuXG4gICAgLy8gVGhlIC5faW52b2tlIG1ldGhvZCB1bmlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlIC5uZXh0LFxuICAgIC8vIC50aHJvdywgYW5kIC5yZXR1cm4gbWV0aG9kcy5cbiAgICBnZW5lcmF0b3IuX2ludm9rZSA9IG1ha2VJbnZva2VNZXRob2QoaW5uZXJGbiwgc2VsZiwgY29udGV4dCk7XG5cbiAgICByZXR1cm4gZ2VuZXJhdG9yO1xuICB9XG4gIGV4cG9ydHMud3JhcCA9IHdyYXA7XG5cbiAgLy8gVHJ5L2NhdGNoIGhlbHBlciB0byBtaW5pbWl6ZSBkZW9wdGltaXphdGlvbnMuIFJldHVybnMgYSBjb21wbGV0aW9uXG4gIC8vIHJlY29yZCBsaWtlIGNvbnRleHQudHJ5RW50cmllc1tpXS5jb21wbGV0aW9uLiBUaGlzIGludGVyZmFjZSBjb3VsZFxuICAvLyBoYXZlIGJlZW4gKGFuZCB3YXMgcHJldmlvdXNseSkgZGVzaWduZWQgdG8gdGFrZSBhIGNsb3N1cmUgdG8gYmVcbiAgLy8gaW52b2tlZCB3aXRob3V0IGFyZ3VtZW50cywgYnV0IGluIGFsbCB0aGUgY2FzZXMgd2UgY2FyZSBhYm91dCB3ZVxuICAvLyBhbHJlYWR5IGhhdmUgYW4gZXhpc3RpbmcgbWV0aG9kIHdlIHdhbnQgdG8gY2FsbCwgc28gdGhlcmUncyBubyBuZWVkXG4gIC8vIHRvIGNyZWF0ZSBhIG5ldyBmdW5jdGlvbiBvYmplY3QuIFdlIGNhbiBldmVuIGdldCBhd2F5IHdpdGggYXNzdW1pbmdcbiAgLy8gdGhlIG1ldGhvZCB0YWtlcyBleGFjdGx5IG9uZSBhcmd1bWVudCwgc2luY2UgdGhhdCBoYXBwZW5zIHRvIGJlIHRydWVcbiAgLy8gaW4gZXZlcnkgY2FzZSwgc28gd2UgZG9uJ3QgaGF2ZSB0byB0b3VjaCB0aGUgYXJndW1lbnRzIG9iamVjdC4gVGhlXG4gIC8vIG9ubHkgYWRkaXRpb25hbCBhbGxvY2F0aW9uIHJlcXVpcmVkIGlzIHRoZSBjb21wbGV0aW9uIHJlY29yZCwgd2hpY2hcbiAgLy8gaGFzIGEgc3RhYmxlIHNoYXBlIGFuZCBzbyBob3BlZnVsbHkgc2hvdWxkIGJlIGNoZWFwIHRvIGFsbG9jYXRlLlxuICBmdW5jdGlvbiB0cnlDYXRjaChmbiwgb2JqLCBhcmcpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJub3JtYWxcIiwgYXJnOiBmbi5jYWxsKG9iaiwgYXJnKSB9O1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJ0aHJvd1wiLCBhcmc6IGVyciB9O1xuICAgIH1cbiAgfVxuXG4gIHZhciBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0ID0gXCJzdXNwZW5kZWRTdGFydFwiO1xuICB2YXIgR2VuU3RhdGVTdXNwZW5kZWRZaWVsZCA9IFwic3VzcGVuZGVkWWllbGRcIjtcbiAgdmFyIEdlblN0YXRlRXhlY3V0aW5nID0gXCJleGVjdXRpbmdcIjtcbiAgdmFyIEdlblN0YXRlQ29tcGxldGVkID0gXCJjb21wbGV0ZWRcIjtcblxuICAvLyBSZXR1cm5pbmcgdGhpcyBvYmplY3QgZnJvbSB0aGUgaW5uZXJGbiBoYXMgdGhlIHNhbWUgZWZmZWN0IGFzXG4gIC8vIGJyZWFraW5nIG91dCBvZiB0aGUgZGlzcGF0Y2ggc3dpdGNoIHN0YXRlbWVudC5cbiAgdmFyIENvbnRpbnVlU2VudGluZWwgPSB7fTtcblxuICAvLyBEdW1teSBjb25zdHJ1Y3RvciBmdW5jdGlvbnMgdGhhdCB3ZSB1c2UgYXMgdGhlIC5jb25zdHJ1Y3RvciBhbmRcbiAgLy8gLmNvbnN0cnVjdG9yLnByb3RvdHlwZSBwcm9wZXJ0aWVzIGZvciBmdW5jdGlvbnMgdGhhdCByZXR1cm4gR2VuZXJhdG9yXG4gIC8vIG9iamVjdHMuIEZvciBmdWxsIHNwZWMgY29tcGxpYW5jZSwgeW91IG1heSB3aXNoIHRvIGNvbmZpZ3VyZSB5b3VyXG4gIC8vIG1pbmlmaWVyIG5vdCB0byBtYW5nbGUgdGhlIG5hbWVzIG9mIHRoZXNlIHR3byBmdW5jdGlvbnMuXG4gIGZ1bmN0aW9uIEdlbmVyYXRvcigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uKCkge31cbiAgZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUoKSB7fVxuXG4gIC8vIFRoaXMgaXMgYSBwb2x5ZmlsbCBmb3IgJUl0ZXJhdG9yUHJvdG90eXBlJSBmb3IgZW52aXJvbm1lbnRzIHRoYXRcbiAgLy8gZG9uJ3QgbmF0aXZlbHkgc3VwcG9ydCBpdC5cbiAgdmFyIEl0ZXJhdG9yUHJvdG90eXBlID0ge307XG4gIGRlZmluZShJdGVyYXRvclByb3RvdHlwZSwgaXRlcmF0b3JTeW1ib2wsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSk7XG5cbiAgdmFyIGdldFByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xuICB2YXIgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgPSBnZXRQcm90byAmJiBnZXRQcm90byhnZXRQcm90byh2YWx1ZXMoW10pKSk7XG4gIGlmIChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAmJlxuICAgICAgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgIT09IE9wICYmXG4gICAgICBoYXNPd24uY2FsbChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSwgaXRlcmF0b3JTeW1ib2wpKSB7XG4gICAgLy8gVGhpcyBlbnZpcm9ubWVudCBoYXMgYSBuYXRpdmUgJUl0ZXJhdG9yUHJvdG90eXBlJTsgdXNlIGl0IGluc3RlYWRcbiAgICAvLyBvZiB0aGUgcG9seWZpbGwuXG4gICAgSXRlcmF0b3JQcm90b3R5cGUgPSBOYXRpdmVJdGVyYXRvclByb3RvdHlwZTtcbiAgfVxuXG4gIHZhciBHcCA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLnByb3RvdHlwZSA9XG4gICAgR2VuZXJhdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoSXRlcmF0b3JQcm90b3R5cGUpO1xuICBHZW5lcmF0b3JGdW5jdGlvbi5wcm90b3R5cGUgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZTtcbiAgZGVmaW5lKEdwLCBcImNvbnN0cnVjdG9yXCIsIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKTtcbiAgZGVmaW5lKEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLCBcImNvbnN0cnVjdG9yXCIsIEdlbmVyYXRvckZ1bmN0aW9uKTtcbiAgR2VuZXJhdG9yRnVuY3Rpb24uZGlzcGxheU5hbWUgPSBkZWZpbmUoXG4gICAgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsXG4gICAgdG9TdHJpbmdUYWdTeW1ib2wsXG4gICAgXCJHZW5lcmF0b3JGdW5jdGlvblwiXG4gICk7XG5cbiAgLy8gSGVscGVyIGZvciBkZWZpbmluZyB0aGUgLm5leHQsIC50aHJvdywgYW5kIC5yZXR1cm4gbWV0aG9kcyBvZiB0aGVcbiAgLy8gSXRlcmF0b3IgaW50ZXJmYWNlIGluIHRlcm1zIG9mIGEgc2luZ2xlIC5faW52b2tlIG1ldGhvZC5cbiAgZnVuY3Rpb24gZGVmaW5lSXRlcmF0b3JNZXRob2RzKHByb3RvdHlwZSkge1xuICAgIFtcIm5leHRcIiwgXCJ0aHJvd1wiLCBcInJldHVyblwiXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgZGVmaW5lKHByb3RvdHlwZSwgbWV0aG9kLCBmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludm9rZShtZXRob2QsIGFyZyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGV4cG9ydHMuaXNHZW5lcmF0b3JGdW5jdGlvbiA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIHZhciBjdG9yID0gdHlwZW9mIGdlbkZ1biA9PT0gXCJmdW5jdGlvblwiICYmIGdlbkZ1bi5jb25zdHJ1Y3RvcjtcbiAgICByZXR1cm4gY3RvclxuICAgICAgPyBjdG9yID09PSBHZW5lcmF0b3JGdW5jdGlvbiB8fFxuICAgICAgICAvLyBGb3IgdGhlIG5hdGl2ZSBHZW5lcmF0b3JGdW5jdGlvbiBjb25zdHJ1Y3RvciwgdGhlIGJlc3Qgd2UgY2FuXG4gICAgICAgIC8vIGRvIGlzIHRvIGNoZWNrIGl0cyAubmFtZSBwcm9wZXJ0eS5cbiAgICAgICAgKGN0b3IuZGlzcGxheU5hbWUgfHwgY3Rvci5uYW1lKSA9PT0gXCJHZW5lcmF0b3JGdW5jdGlvblwiXG4gICAgICA6IGZhbHNlO1xuICB9O1xuXG4gIGV4cG9ydHMubWFyayA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihnZW5GdW4sIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2VuRnVuLl9fcHJvdG9fXyA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICAgICAgZGVmaW5lKGdlbkZ1biwgdG9TdHJpbmdUYWdTeW1ib2wsIFwiR2VuZXJhdG9yRnVuY3Rpb25cIik7XG4gICAgfVxuICAgIGdlbkZ1bi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEdwKTtcbiAgICByZXR1cm4gZ2VuRnVuO1xuICB9O1xuXG4gIC8vIFdpdGhpbiB0aGUgYm9keSBvZiBhbnkgYXN5bmMgZnVuY3Rpb24sIGBhd2FpdCB4YCBpcyB0cmFuc2Zvcm1lZCB0b1xuICAvLyBgeWllbGQgcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHgpYCwgc28gdGhhdCB0aGUgcnVudGltZSBjYW4gdGVzdFxuICAvLyBgaGFzT3duLmNhbGwodmFsdWUsIFwiX19hd2FpdFwiKWAgdG8gZGV0ZXJtaW5lIGlmIHRoZSB5aWVsZGVkIHZhbHVlIGlzXG4gIC8vIG1lYW50IHRvIGJlIGF3YWl0ZWQuXG4gIGV4cG9ydHMuYXdyYXAgPSBmdW5jdGlvbihhcmcpIHtcbiAgICByZXR1cm4geyBfX2F3YWl0OiBhcmcgfTtcbiAgfTtcblxuICBmdW5jdGlvbiBBc3luY0l0ZXJhdG9yKGdlbmVyYXRvciwgUHJvbWlzZUltcGwpIHtcbiAgICBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGdlbmVyYXRvclttZXRob2RdLCBnZW5lcmF0b3IsIGFyZyk7XG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICByZWplY3QocmVjb3JkLmFyZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgcmVzdWx0ID0gcmVjb3JkLmFyZztcbiAgICAgICAgdmFyIHZhbHVlID0gcmVzdWx0LnZhbHVlO1xuICAgICAgICBpZiAodmFsdWUgJiZcbiAgICAgICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgaGFzT3duLmNhbGwodmFsdWUsIFwiX19hd2FpdFwiKSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlSW1wbC5yZXNvbHZlKHZhbHVlLl9fYXdhaXQpLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGludm9rZShcIm5leHRcIiwgdmFsdWUsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICBpbnZva2UoXCJ0aHJvd1wiLCBlcnIsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZUltcGwucmVzb2x2ZSh2YWx1ZSkudGhlbihmdW5jdGlvbih1bndyYXBwZWQpIHtcbiAgICAgICAgICAvLyBXaGVuIGEgeWllbGRlZCBQcm9taXNlIGlzIHJlc29sdmVkLCBpdHMgZmluYWwgdmFsdWUgYmVjb21lc1xuICAgICAgICAgIC8vIHRoZSAudmFsdWUgb2YgdGhlIFByb21pc2U8e3ZhbHVlLGRvbmV9PiByZXN1bHQgZm9yIHRoZVxuICAgICAgICAgIC8vIGN1cnJlbnQgaXRlcmF0aW9uLlxuICAgICAgICAgIHJlc3VsdC52YWx1ZSA9IHVud3JhcHBlZDtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgLy8gSWYgYSByZWplY3RlZCBQcm9taXNlIHdhcyB5aWVsZGVkLCB0aHJvdyB0aGUgcmVqZWN0aW9uIGJhY2tcbiAgICAgICAgICAvLyBpbnRvIHRoZSBhc3luYyBnZW5lcmF0b3IgZnVuY3Rpb24gc28gaXQgY2FuIGJlIGhhbmRsZWQgdGhlcmUuXG4gICAgICAgICAgcmV0dXJuIGludm9rZShcInRocm93XCIsIGVycm9yLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcHJldmlvdXNQcm9taXNlO1xuXG4gICAgZnVuY3Rpb24gZW5xdWV1ZShtZXRob2QsIGFyZykge1xuICAgICAgZnVuY3Rpb24gY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZUltcGwoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgaW52b2tlKG1ldGhvZCwgYXJnLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHByZXZpb3VzUHJvbWlzZSA9XG4gICAgICAgIC8vIElmIGVucXVldWUgaGFzIGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiB3ZSB3YW50IHRvIHdhaXQgdW50aWxcbiAgICAgICAgLy8gYWxsIHByZXZpb3VzIFByb21pc2VzIGhhdmUgYmVlbiByZXNvbHZlZCBiZWZvcmUgY2FsbGluZyBpbnZva2UsXG4gICAgICAgIC8vIHNvIHRoYXQgcmVzdWx0cyBhcmUgYWx3YXlzIGRlbGl2ZXJlZCBpbiB0aGUgY29ycmVjdCBvcmRlci4gSWZcbiAgICAgICAgLy8gZW5xdWV1ZSBoYXMgbm90IGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiBpdCBpcyBpbXBvcnRhbnQgdG9cbiAgICAgICAgLy8gY2FsbCBpbnZva2UgaW1tZWRpYXRlbHksIHdpdGhvdXQgd2FpdGluZyBvbiBhIGNhbGxiYWNrIHRvIGZpcmUsXG4gICAgICAgIC8vIHNvIHRoYXQgdGhlIGFzeW5jIGdlbmVyYXRvciBmdW5jdGlvbiBoYXMgdGhlIG9wcG9ydHVuaXR5IHRvIGRvXG4gICAgICAgIC8vIGFueSBuZWNlc3Nhcnkgc2V0dXAgaW4gYSBwcmVkaWN0YWJsZSB3YXkuIFRoaXMgcHJlZGljdGFiaWxpdHlcbiAgICAgICAgLy8gaXMgd2h5IHRoZSBQcm9taXNlIGNvbnN0cnVjdG9yIHN5bmNocm9ub3VzbHkgaW52b2tlcyBpdHNcbiAgICAgICAgLy8gZXhlY3V0b3IgY2FsbGJhY2ssIGFuZCB3aHkgYXN5bmMgZnVuY3Rpb25zIHN5bmNocm9ub3VzbHlcbiAgICAgICAgLy8gZXhlY3V0ZSBjb2RlIGJlZm9yZSB0aGUgZmlyc3QgYXdhaXQuIFNpbmNlIHdlIGltcGxlbWVudCBzaW1wbGVcbiAgICAgICAgLy8gYXN5bmMgZnVuY3Rpb25zIGluIHRlcm1zIG9mIGFzeW5jIGdlbmVyYXRvcnMsIGl0IGlzIGVzcGVjaWFsbHlcbiAgICAgICAgLy8gaW1wb3J0YW50IHRvIGdldCB0aGlzIHJpZ2h0LCBldmVuIHRob3VnaCBpdCByZXF1aXJlcyBjYXJlLlxuICAgICAgICBwcmV2aW91c1Byb21pc2UgPyBwcmV2aW91c1Byb21pc2UudGhlbihcbiAgICAgICAgICBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZyxcbiAgICAgICAgICAvLyBBdm9pZCBwcm9wYWdhdGluZyBmYWlsdXJlcyB0byBQcm9taXNlcyByZXR1cm5lZCBieSBsYXRlclxuICAgICAgICAgIC8vIGludm9jYXRpb25zIG9mIHRoZSBpdGVyYXRvci5cbiAgICAgICAgICBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZ1xuICAgICAgICApIDogY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKTtcbiAgICB9XG5cbiAgICAvLyBEZWZpbmUgdGhlIHVuaWZpZWQgaGVscGVyIG1ldGhvZCB0aGF0IGlzIHVzZWQgdG8gaW1wbGVtZW50IC5uZXh0LFxuICAgIC8vIC50aHJvdywgYW5kIC5yZXR1cm4gKHNlZSBkZWZpbmVJdGVyYXRvck1ldGhvZHMpLlxuICAgIHRoaXMuX2ludm9rZSA9IGVucXVldWU7XG4gIH1cblxuICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoQXN5bmNJdGVyYXRvci5wcm90b3R5cGUpO1xuICBkZWZpbmUoQXN5bmNJdGVyYXRvci5wcm90b3R5cGUsIGFzeW5jSXRlcmF0b3JTeW1ib2wsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSk7XG4gIGV4cG9ydHMuQXN5bmNJdGVyYXRvciA9IEFzeW5jSXRlcmF0b3I7XG5cbiAgLy8gTm90ZSB0aGF0IHNpbXBsZSBhc3luYyBmdW5jdGlvbnMgYXJlIGltcGxlbWVudGVkIG9uIHRvcCBvZlxuICAvLyBBc3luY0l0ZXJhdG9yIG9iamVjdHM7IHRoZXkganVzdCByZXR1cm4gYSBQcm9taXNlIGZvciB0aGUgdmFsdWUgb2ZcbiAgLy8gdGhlIGZpbmFsIHJlc3VsdCBwcm9kdWNlZCBieSB0aGUgaXRlcmF0b3IuXG4gIGV4cG9ydHMuYXN5bmMgPSBmdW5jdGlvbihpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCwgUHJvbWlzZUltcGwpIHtcbiAgICBpZiAoUHJvbWlzZUltcGwgPT09IHZvaWQgMCkgUHJvbWlzZUltcGwgPSBQcm9taXNlO1xuXG4gICAgdmFyIGl0ZXIgPSBuZXcgQXN5bmNJdGVyYXRvcihcbiAgICAgIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpLFxuICAgICAgUHJvbWlzZUltcGxcbiAgICApO1xuXG4gICAgcmV0dXJuIGV4cG9ydHMuaXNHZW5lcmF0b3JGdW5jdGlvbihvdXRlckZuKVxuICAgICAgPyBpdGVyIC8vIElmIG91dGVyRm4gaXMgYSBnZW5lcmF0b3IsIHJldHVybiB0aGUgZnVsbCBpdGVyYXRvci5cbiAgICAgIDogaXRlci5uZXh0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0LmRvbmUgPyByZXN1bHQudmFsdWUgOiBpdGVyLm5leHQoKTtcbiAgICAgICAgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KSB7XG4gICAgdmFyIHN0YXRlID0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydDtcblxuICAgIHJldHVybiBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcpIHtcbiAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVFeGVjdXRpbmcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZ1wiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUNvbXBsZXRlZCkge1xuICAgICAgICBpZiAobWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICB0aHJvdyBhcmc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCZSBmb3JnaXZpbmcsIHBlciAyNS4zLjMuMy4zIG9mIHRoZSBzcGVjOlxuICAgICAgICAvLyBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtZ2VuZXJhdG9ycmVzdW1lXG4gICAgICAgIHJldHVybiBkb25lUmVzdWx0KCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnRleHQubWV0aG9kID0gbWV0aG9kO1xuICAgICAgY29udGV4dC5hcmcgPSBhcmc7XG5cbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIHZhciBkZWxlZ2F0ZSA9IGNvbnRleHQuZGVsZWdhdGU7XG4gICAgICAgIGlmIChkZWxlZ2F0ZSkge1xuICAgICAgICAgIHZhciBkZWxlZ2F0ZVJlc3VsdCA9IG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuICAgICAgICAgIGlmIChkZWxlZ2F0ZVJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKGRlbGVnYXRlUmVzdWx0ID09PSBDb250aW51ZVNlbnRpbmVsKSBjb250aW51ZTtcbiAgICAgICAgICAgIHJldHVybiBkZWxlZ2F0ZVJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwibmV4dFwiKSB7XG4gICAgICAgICAgLy8gU2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzXG4gICAgICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgICAgICBjb250ZXh0LnNlbnQgPSBjb250ZXh0Ll9zZW50ID0gY29udGV4dC5hcmc7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0KSB7XG4gICAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgICAgdGhyb3cgY29udGV4dC5hcmc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihjb250ZXh0LmFyZyk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJyZXR1cm5cIikge1xuICAgICAgICAgIGNvbnRleHQuYWJydXB0KFwicmV0dXJuXCIsIGNvbnRleHQuYXJnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXRlID0gR2VuU3RhdGVFeGVjdXRpbmc7XG5cbiAgICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIpIHtcbiAgICAgICAgICAvLyBJZiBhbiBleGNlcHRpb24gaXMgdGhyb3duIGZyb20gaW5uZXJGbiwgd2UgbGVhdmUgc3RhdGUgPT09XG4gICAgICAgICAgLy8gR2VuU3RhdGVFeGVjdXRpbmcgYW5kIGxvb3AgYmFjayBmb3IgYW5vdGhlciBpbnZvY2F0aW9uLlxuICAgICAgICAgIHN0YXRlID0gY29udGV4dC5kb25lXG4gICAgICAgICAgICA/IEdlblN0YXRlQ29tcGxldGVkXG4gICAgICAgICAgICA6IEdlblN0YXRlU3VzcGVuZGVkWWllbGQ7XG5cbiAgICAgICAgICBpZiAocmVjb3JkLmFyZyA9PT0gQ29udGludWVTZW50aW5lbCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlOiByZWNvcmQuYXJnLFxuICAgICAgICAgICAgZG9uZTogY29udGV4dC5kb25lXG4gICAgICAgICAgfTtcblxuICAgICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgIC8vIERpc3BhdGNoIHRoZSBleGNlcHRpb24gYnkgbG9vcGluZyBiYWNrIGFyb3VuZCB0byB0aGVcbiAgICAgICAgICAvLyBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGNvbnRleHQuYXJnKSBjYWxsIGFib3ZlLlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvLyBDYWxsIGRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXShjb250ZXh0LmFyZykgYW5kIGhhbmRsZSB0aGVcbiAgLy8gcmVzdWx0LCBlaXRoZXIgYnkgcmV0dXJuaW5nIGEgeyB2YWx1ZSwgZG9uZSB9IHJlc3VsdCBmcm9tIHRoZVxuICAvLyBkZWxlZ2F0ZSBpdGVyYXRvciwgb3IgYnkgbW9kaWZ5aW5nIGNvbnRleHQubWV0aG9kIGFuZCBjb250ZXh0LmFyZyxcbiAgLy8gc2V0dGluZyBjb250ZXh0LmRlbGVnYXRlIHRvIG51bGwsIGFuZCByZXR1cm5pbmcgdGhlIENvbnRpbnVlU2VudGluZWwuXG4gIGZ1bmN0aW9uIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpIHtcbiAgICB2YXIgbWV0aG9kID0gZGVsZWdhdGUuaXRlcmF0b3JbY29udGV4dC5tZXRob2RdO1xuICAgIGlmIChtZXRob2QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gQSAudGhyb3cgb3IgLnJldHVybiB3aGVuIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgbm8gLnRocm93XG4gICAgICAvLyBtZXRob2QgYWx3YXlzIHRlcm1pbmF0ZXMgdGhlIHlpZWxkKiBsb29wLlxuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG5cbiAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIC8vIE5vdGU6IFtcInJldHVyblwiXSBtdXN0IGJlIHVzZWQgZm9yIEVTMyBwYXJzaW5nIGNvbXBhdGliaWxpdHkuXG4gICAgICAgIGlmIChkZWxlZ2F0ZS5pdGVyYXRvcltcInJldHVyblwiXSkge1xuICAgICAgICAgIC8vIElmIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgYSByZXR1cm4gbWV0aG9kLCBnaXZlIGl0IGFcbiAgICAgICAgICAvLyBjaGFuY2UgdG8gY2xlYW4gdXAuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInJldHVyblwiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgICAgIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuXG4gICAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIC8vIElmIG1heWJlSW52b2tlRGVsZWdhdGUoY29udGV4dCkgY2hhbmdlZCBjb250ZXh0Lm1ldGhvZCBmcm9tXG4gICAgICAgICAgICAvLyBcInJldHVyblwiIHRvIFwidGhyb3dcIiwgbGV0IHRoYXQgb3ZlcnJpZGUgdGhlIFR5cGVFcnJvciBiZWxvdy5cbiAgICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgXCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICd0aHJvdycgbWV0aG9kXCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2gobWV0aG9kLCBkZWxlZ2F0ZS5pdGVyYXRvciwgY29udGV4dC5hcmcpO1xuXG4gICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgY29udGV4dC5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgaW5mbyA9IHJlY29yZC5hcmc7XG5cbiAgICBpZiAoISBpbmZvKSB7XG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcihcIml0ZXJhdG9yIHJlc3VsdCBpcyBub3QgYW4gb2JqZWN0XCIpO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICBpZiAoaW5mby5kb25lKSB7XG4gICAgICAvLyBBc3NpZ24gdGhlIHJlc3VsdCBvZiB0aGUgZmluaXNoZWQgZGVsZWdhdGUgdG8gdGhlIHRlbXBvcmFyeVxuICAgICAgLy8gdmFyaWFibGUgc3BlY2lmaWVkIGJ5IGRlbGVnYXRlLnJlc3VsdE5hbWUgKHNlZSBkZWxlZ2F0ZVlpZWxkKS5cbiAgICAgIGNvbnRleHRbZGVsZWdhdGUucmVzdWx0TmFtZV0gPSBpbmZvLnZhbHVlO1xuXG4gICAgICAvLyBSZXN1bWUgZXhlY3V0aW9uIGF0IHRoZSBkZXNpcmVkIGxvY2F0aW9uIChzZWUgZGVsZWdhdGVZaWVsZCkuXG4gICAgICBjb250ZXh0Lm5leHQgPSBkZWxlZ2F0ZS5uZXh0TG9jO1xuXG4gICAgICAvLyBJZiBjb250ZXh0Lm1ldGhvZCB3YXMgXCJ0aHJvd1wiIGJ1dCB0aGUgZGVsZWdhdGUgaGFuZGxlZCB0aGVcbiAgICAgIC8vIGV4Y2VwdGlvbiwgbGV0IHRoZSBvdXRlciBnZW5lcmF0b3IgcHJvY2VlZCBub3JtYWxseS4gSWZcbiAgICAgIC8vIGNvbnRleHQubWV0aG9kIHdhcyBcIm5leHRcIiwgZm9yZ2V0IGNvbnRleHQuYXJnIHNpbmNlIGl0IGhhcyBiZWVuXG4gICAgICAvLyBcImNvbnN1bWVkXCIgYnkgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yLiBJZiBjb250ZXh0Lm1ldGhvZCB3YXNcbiAgICAgIC8vIFwicmV0dXJuXCIsIGFsbG93IHRoZSBvcmlnaW5hbCAucmV0dXJuIGNhbGwgdG8gY29udGludWUgaW4gdGhlXG4gICAgICAvLyBvdXRlciBnZW5lcmF0b3IuXG4gICAgICBpZiAoY29udGV4dC5tZXRob2QgIT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgY29udGV4dC5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUmUteWllbGQgdGhlIHJlc3VsdCByZXR1cm5lZCBieSB0aGUgZGVsZWdhdGUgbWV0aG9kLlxuICAgICAgcmV0dXJuIGluZm87XG4gICAgfVxuXG4gICAgLy8gVGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGlzIGZpbmlzaGVkLCBzbyBmb3JnZXQgaXQgYW5kIGNvbnRpbnVlIHdpdGhcbiAgICAvLyB0aGUgb3V0ZXIgZ2VuZXJhdG9yLlxuICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICB9XG5cbiAgLy8gRGVmaW5lIEdlbmVyYXRvci5wcm90b3R5cGUue25leHQsdGhyb3cscmV0dXJufSBpbiB0ZXJtcyBvZiB0aGVcbiAgLy8gdW5pZmllZCAuX2ludm9rZSBoZWxwZXIgbWV0aG9kLlxuICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoR3ApO1xuXG4gIGRlZmluZShHcCwgdG9TdHJpbmdUYWdTeW1ib2wsIFwiR2VuZXJhdG9yXCIpO1xuXG4gIC8vIEEgR2VuZXJhdG9yIHNob3VsZCBhbHdheXMgcmV0dXJuIGl0c2VsZiBhcyB0aGUgaXRlcmF0b3Igb2JqZWN0IHdoZW4gdGhlXG4gIC8vIEBAaXRlcmF0b3IgZnVuY3Rpb24gaXMgY2FsbGVkIG9uIGl0LiBTb21lIGJyb3dzZXJzJyBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlXG4gIC8vIGl0ZXJhdG9yIHByb3RvdHlwZSBjaGFpbiBpbmNvcnJlY3RseSBpbXBsZW1lbnQgdGhpcywgY2F1c2luZyB0aGUgR2VuZXJhdG9yXG4gIC8vIG9iamVjdCB0byBub3QgYmUgcmV0dXJuZWQgZnJvbSB0aGlzIGNhbGwuIFRoaXMgZW5zdXJlcyB0aGF0IGRvZXNuJ3QgaGFwcGVuLlxuICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlZ2VuZXJhdG9yL2lzc3Vlcy8yNzQgZm9yIG1vcmUgZGV0YWlscy5cbiAgZGVmaW5lKEdwLCBpdGVyYXRvclN5bWJvbCwgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0pO1xuXG4gIGRlZmluZShHcCwgXCJ0b1N0cmluZ1wiLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJbb2JqZWN0IEdlbmVyYXRvcl1cIjtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gcHVzaFRyeUVudHJ5KGxvY3MpIHtcbiAgICB2YXIgZW50cnkgPSB7IHRyeUxvYzogbG9jc1swXSB9O1xuXG4gICAgaWYgKDEgaW4gbG9jcykge1xuICAgICAgZW50cnkuY2F0Y2hMb2MgPSBsb2NzWzFdO1xuICAgIH1cblxuICAgIGlmICgyIGluIGxvY3MpIHtcbiAgICAgIGVudHJ5LmZpbmFsbHlMb2MgPSBsb2NzWzJdO1xuICAgICAgZW50cnkuYWZ0ZXJMb2MgPSBsb2NzWzNdO1xuICAgIH1cblxuICAgIHRoaXMudHJ5RW50cmllcy5wdXNoKGVudHJ5KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc2V0VHJ5RW50cnkoZW50cnkpIHtcbiAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbiB8fCB7fTtcbiAgICByZWNvcmQudHlwZSA9IFwibm9ybWFsXCI7XG4gICAgZGVsZXRlIHJlY29yZC5hcmc7XG4gICAgZW50cnkuY29tcGxldGlvbiA9IHJlY29yZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIENvbnRleHQodHJ5TG9jc0xpc3QpIHtcbiAgICAvLyBUaGUgcm9vdCBlbnRyeSBvYmplY3QgKGVmZmVjdGl2ZWx5IGEgdHJ5IHN0YXRlbWVudCB3aXRob3V0IGEgY2F0Y2hcbiAgICAvLyBvciBhIGZpbmFsbHkgYmxvY2spIGdpdmVzIHVzIGEgcGxhY2UgdG8gc3RvcmUgdmFsdWVzIHRocm93biBmcm9tXG4gICAgLy8gbG9jYXRpb25zIHdoZXJlIHRoZXJlIGlzIG5vIGVuY2xvc2luZyB0cnkgc3RhdGVtZW50LlxuICAgIHRoaXMudHJ5RW50cmllcyA9IFt7IHRyeUxvYzogXCJyb290XCIgfV07XG4gICAgdHJ5TG9jc0xpc3QuZm9yRWFjaChwdXNoVHJ5RW50cnksIHRoaXMpO1xuICAgIHRoaXMucmVzZXQodHJ1ZSk7XG4gIH1cblxuICBleHBvcnRzLmtleXMgPSBmdW5jdGlvbihvYmplY3QpIHtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICAgIGtleXMucHVzaChrZXkpO1xuICAgIH1cbiAgICBrZXlzLnJldmVyc2UoKTtcblxuICAgIC8vIFJhdGhlciB0aGFuIHJldHVybmluZyBhbiBvYmplY3Qgd2l0aCBhIG5leHQgbWV0aG9kLCB3ZSBrZWVwXG4gICAgLy8gdGhpbmdzIHNpbXBsZSBhbmQgcmV0dXJuIHRoZSBuZXh0IGZ1bmN0aW9uIGl0c2VsZi5cbiAgICByZXR1cm4gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgIHdoaWxlIChrZXlzLmxlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0ga2V5cy5wb3AoKTtcbiAgICAgICAgaWYgKGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgICBuZXh0LnZhbHVlID0ga2V5O1xuICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRvIGF2b2lkIGNyZWF0aW5nIGFuIGFkZGl0aW9uYWwgb2JqZWN0LCB3ZSBqdXN0IGhhbmcgdGhlIC52YWx1ZVxuICAgICAgLy8gYW5kIC5kb25lIHByb3BlcnRpZXMgb2ZmIHRoZSBuZXh0IGZ1bmN0aW9uIG9iamVjdCBpdHNlbGYuIFRoaXNcbiAgICAgIC8vIGFsc28gZW5zdXJlcyB0aGF0IHRoZSBtaW5pZmllciB3aWxsIG5vdCBhbm9ueW1pemUgdGhlIGZ1bmN0aW9uLlxuICAgICAgbmV4dC5kb25lID0gdHJ1ZTtcbiAgICAgIHJldHVybiBuZXh0O1xuICAgIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gdmFsdWVzKGl0ZXJhYmxlKSB7XG4gICAgaWYgKGl0ZXJhYmxlKSB7XG4gICAgICB2YXIgaXRlcmF0b3JNZXRob2QgPSBpdGVyYWJsZVtpdGVyYXRvclN5bWJvbF07XG4gICAgICBpZiAoaXRlcmF0b3JNZXRob2QpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhdG9yTWV0aG9kLmNhbGwoaXRlcmFibGUpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGl0ZXJhYmxlLm5leHQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gaXRlcmFibGU7XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNOYU4oaXRlcmFibGUubGVuZ3RoKSkge1xuICAgICAgICB2YXIgaSA9IC0xLCBuZXh0ID0gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgICAgICB3aGlsZSAoKytpIDwgaXRlcmFibGUubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoaGFzT3duLmNhbGwoaXRlcmFibGUsIGkpKSB7XG4gICAgICAgICAgICAgIG5leHQudmFsdWUgPSBpdGVyYWJsZVtpXTtcbiAgICAgICAgICAgICAgbmV4dC5kb25lID0gZmFsc2U7XG4gICAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIG5leHQudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgbmV4dC5kb25lID0gdHJ1ZTtcblxuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBuZXh0Lm5leHQgPSBuZXh0O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJldHVybiBhbiBpdGVyYXRvciB3aXRoIG5vIHZhbHVlcy5cbiAgICByZXR1cm4geyBuZXh0OiBkb25lUmVzdWx0IH07XG4gIH1cbiAgZXhwb3J0cy52YWx1ZXMgPSB2YWx1ZXM7XG5cbiAgZnVuY3Rpb24gZG9uZVJlc3VsdCgpIHtcbiAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gIH1cblxuICBDb250ZXh0LnByb3RvdHlwZSA9IHtcbiAgICBjb25zdHJ1Y3RvcjogQ29udGV4dCxcblxuICAgIHJlc2V0OiBmdW5jdGlvbihza2lwVGVtcFJlc2V0KSB7XG4gICAgICB0aGlzLnByZXYgPSAwO1xuICAgICAgdGhpcy5uZXh0ID0gMDtcbiAgICAgIC8vIFJlc2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzXG4gICAgICAvLyBmdW5jdGlvbi5zZW50IGltcGxlbWVudGF0aW9uLlxuICAgICAgdGhpcy5zZW50ID0gdGhpcy5fc2VudCA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgdGhpcy5kZWxlZ2F0ZSA9IG51bGw7XG5cbiAgICAgIHRoaXMubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICB0aGlzLmFyZyA9IHVuZGVmaW5lZDtcblxuICAgICAgdGhpcy50cnlFbnRyaWVzLmZvckVhY2gocmVzZXRUcnlFbnRyeSk7XG5cbiAgICAgIGlmICghc2tpcFRlbXBSZXNldCkge1xuICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMpIHtcbiAgICAgICAgICAvLyBOb3Qgc3VyZSBhYm91dCB0aGUgb3B0aW1hbCBvcmRlciBvZiB0aGVzZSBjb25kaXRpb25zOlxuICAgICAgICAgIGlmIChuYW1lLmNoYXJBdCgwKSA9PT0gXCJ0XCIgJiZcbiAgICAgICAgICAgICAgaGFzT3duLmNhbGwodGhpcywgbmFtZSkgJiZcbiAgICAgICAgICAgICAgIWlzTmFOKCtuYW1lLnNsaWNlKDEpKSkge1xuICAgICAgICAgICAgdGhpc1tuYW1lXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgc3RvcDogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuXG4gICAgICB2YXIgcm9vdEVudHJ5ID0gdGhpcy50cnlFbnRyaWVzWzBdO1xuICAgICAgdmFyIHJvb3RSZWNvcmQgPSByb290RW50cnkuY29tcGxldGlvbjtcbiAgICAgIGlmIChyb290UmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICB0aHJvdyByb290UmVjb3JkLmFyZztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMucnZhbDtcbiAgICB9LFxuXG4gICAgZGlzcGF0Y2hFeGNlcHRpb246IGZ1bmN0aW9uKGV4Y2VwdGlvbikge1xuICAgICAgaWYgKHRoaXMuZG9uZSkge1xuICAgICAgICB0aHJvdyBleGNlcHRpb247XG4gICAgICB9XG5cbiAgICAgIHZhciBjb250ZXh0ID0gdGhpcztcbiAgICAgIGZ1bmN0aW9uIGhhbmRsZShsb2MsIGNhdWdodCkge1xuICAgICAgICByZWNvcmQudHlwZSA9IFwidGhyb3dcIjtcbiAgICAgICAgcmVjb3JkLmFyZyA9IGV4Y2VwdGlvbjtcbiAgICAgICAgY29udGV4dC5uZXh0ID0gbG9jO1xuXG4gICAgICAgIGlmIChjYXVnaHQpIHtcbiAgICAgICAgICAvLyBJZiB0aGUgZGlzcGF0Y2hlZCBleGNlcHRpb24gd2FzIGNhdWdodCBieSBhIGNhdGNoIGJsb2NrLFxuICAgICAgICAgIC8vIHRoZW4gbGV0IHRoYXQgY2F0Y2ggYmxvY2sgaGFuZGxlIHRoZSBleGNlcHRpb24gbm9ybWFsbHkuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAhISBjYXVnaHQ7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbjtcblxuICAgICAgICBpZiAoZW50cnkudHJ5TG9jID09PSBcInJvb3RcIikge1xuICAgICAgICAgIC8vIEV4Y2VwdGlvbiB0aHJvd24gb3V0c2lkZSBvZiBhbnkgdHJ5IGJsb2NrIHRoYXQgY291bGQgaGFuZGxlXG4gICAgICAgICAgLy8gaXQsIHNvIHNldCB0aGUgY29tcGxldGlvbiB2YWx1ZSBvZiB0aGUgZW50aXJlIGZ1bmN0aW9uIHRvXG4gICAgICAgICAgLy8gdGhyb3cgdGhlIGV4Y2VwdGlvbi5cbiAgICAgICAgICByZXR1cm4gaGFuZGxlKFwiZW5kXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA8PSB0aGlzLnByZXYpIHtcbiAgICAgICAgICB2YXIgaGFzQ2F0Y2ggPSBoYXNPd24uY2FsbChlbnRyeSwgXCJjYXRjaExvY1wiKTtcbiAgICAgICAgICB2YXIgaGFzRmluYWxseSA9IGhhc093bi5jYWxsKGVudHJ5LCBcImZpbmFsbHlMb2NcIik7XG5cbiAgICAgICAgICBpZiAoaGFzQ2F0Y2ggJiYgaGFzRmluYWxseSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsIHRydWUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKGhhc0NhdGNoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuY2F0Y2hMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKGhhc0ZpbmFsbHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHlcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIGFicnVwdDogZnVuY3Rpb24odHlwZSwgYXJnKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA8PSB0aGlzLnByZXYgJiZcbiAgICAgICAgICAgIGhhc093bi5jYWxsKGVudHJ5LCBcImZpbmFsbHlMb2NcIikgJiZcbiAgICAgICAgICAgIHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICB2YXIgZmluYWxseUVudHJ5ID0gZW50cnk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGZpbmFsbHlFbnRyeSAmJlxuICAgICAgICAgICh0eXBlID09PSBcImJyZWFrXCIgfHxcbiAgICAgICAgICAgdHlwZSA9PT0gXCJjb250aW51ZVwiKSAmJlxuICAgICAgICAgIGZpbmFsbHlFbnRyeS50cnlMb2MgPD0gYXJnICYmXG4gICAgICAgICAgYXJnIDw9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgIC8vIElnbm9yZSB0aGUgZmluYWxseSBlbnRyeSBpZiBjb250cm9sIGlzIG5vdCBqdW1waW5nIHRvIGFcbiAgICAgICAgLy8gbG9jYXRpb24gb3V0c2lkZSB0aGUgdHJ5L2NhdGNoIGJsb2NrLlxuICAgICAgICBmaW5hbGx5RW50cnkgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICB2YXIgcmVjb3JkID0gZmluYWxseUVudHJ5ID8gZmluYWxseUVudHJ5LmNvbXBsZXRpb24gOiB7fTtcbiAgICAgIHJlY29yZC50eXBlID0gdHlwZTtcbiAgICAgIHJlY29yZC5hcmcgPSBhcmc7XG5cbiAgICAgIGlmIChmaW5hbGx5RW50cnkpIHtcbiAgICAgICAgdGhpcy5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgdGhpcy5uZXh0ID0gZmluYWxseUVudHJ5LmZpbmFsbHlMb2M7XG4gICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5jb21wbGV0ZShyZWNvcmQpO1xuICAgIH0sXG5cbiAgICBjb21wbGV0ZTogZnVuY3Rpb24ocmVjb3JkLCBhZnRlckxvYykge1xuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgcmVjb3JkLmFyZztcbiAgICAgIH1cblxuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcImJyZWFrXCIgfHxcbiAgICAgICAgICByZWNvcmQudHlwZSA9PT0gXCJjb250aW51ZVwiKSB7XG4gICAgICAgIHRoaXMubmV4dCA9IHJlY29yZC5hcmc7XG4gICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcInJldHVyblwiKSB7XG4gICAgICAgIHRoaXMucnZhbCA9IHRoaXMuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgICAgdGhpcy5tZXRob2QgPSBcInJldHVyblwiO1xuICAgICAgICB0aGlzLm5leHQgPSBcImVuZFwiO1xuICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJub3JtYWxcIiAmJiBhZnRlckxvYykge1xuICAgICAgICB0aGlzLm5leHQgPSBhZnRlckxvYztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfSxcblxuICAgIGZpbmlzaDogZnVuY3Rpb24oZmluYWxseUxvYykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS5maW5hbGx5TG9jID09PSBmaW5hbGx5TG9jKSB7XG4gICAgICAgICAgdGhpcy5jb21wbGV0ZShlbnRyeS5jb21wbGV0aW9uLCBlbnRyeS5hZnRlckxvYyk7XG4gICAgICAgICAgcmVzZXRUcnlFbnRyeShlbnRyeSk7XG4gICAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgXCJjYXRjaFwiOiBmdW5jdGlvbih0cnlMb2MpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkudHJ5TG9jID09PSB0cnlMb2MpIHtcbiAgICAgICAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbjtcbiAgICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgdmFyIHRocm93biA9IHJlY29yZC5hcmc7XG4gICAgICAgICAgICByZXNldFRyeUVudHJ5KGVudHJ5KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRocm93bjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUaGUgY29udGV4dC5jYXRjaCBtZXRob2QgbXVzdCBvbmx5IGJlIGNhbGxlZCB3aXRoIGEgbG9jYXRpb25cbiAgICAgIC8vIGFyZ3VtZW50IHRoYXQgY29ycmVzcG9uZHMgdG8gYSBrbm93biBjYXRjaCBibG9jay5cbiAgICAgIHRocm93IG5ldyBFcnJvcihcImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdFwiKTtcbiAgICB9LFxuXG4gICAgZGVsZWdhdGVZaWVsZDogZnVuY3Rpb24oaXRlcmFibGUsIHJlc3VsdE5hbWUsIG5leHRMb2MpIHtcbiAgICAgIHRoaXMuZGVsZWdhdGUgPSB7XG4gICAgICAgIGl0ZXJhdG9yOiB2YWx1ZXMoaXRlcmFibGUpLFxuICAgICAgICByZXN1bHROYW1lOiByZXN1bHROYW1lLFxuICAgICAgICBuZXh0TG9jOiBuZXh0TG9jXG4gICAgICB9O1xuXG4gICAgICBpZiAodGhpcy5tZXRob2QgPT09IFwibmV4dFwiKSB7XG4gICAgICAgIC8vIERlbGliZXJhdGVseSBmb3JnZXQgdGhlIGxhc3Qgc2VudCB2YWx1ZSBzbyB0aGF0IHdlIGRvbid0XG4gICAgICAgIC8vIGFjY2lkZW50YWxseSBwYXNzIGl0IG9uIHRvIHRoZSBkZWxlZ2F0ZS5cbiAgICAgICAgdGhpcy5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cbiAgfTtcblxuICAvLyBSZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhpcyBzY3JpcHQgaXMgZXhlY3V0aW5nIGFzIGEgQ29tbW9uSlMgbW9kdWxlXG4gIC8vIG9yIG5vdCwgcmV0dXJuIHRoZSBydW50aW1lIG9iamVjdCBzbyB0aGF0IHdlIGNhbiBkZWNsYXJlIHRoZSB2YXJpYWJsZVxuICAvLyByZWdlbmVyYXRvclJ1bnRpbWUgaW4gdGhlIG91dGVyIHNjb3BlLCB3aGljaCBhbGxvd3MgdGhpcyBtb2R1bGUgdG8gYmVcbiAgLy8gaW5qZWN0ZWQgZWFzaWx5IGJ5IGBiaW4vcmVnZW5lcmF0b3IgLS1pbmNsdWRlLXJ1bnRpbWUgc2NyaXB0LmpzYC5cbiAgcmV0dXJuIGV4cG9ydHM7XG5cbn0oXG4gIC8vIElmIHRoaXMgc2NyaXB0IGlzIGV4ZWN1dGluZyBhcyBhIENvbW1vbkpTIG1vZHVsZSwgdXNlIG1vZHVsZS5leHBvcnRzXG4gIC8vIGFzIHRoZSByZWdlbmVyYXRvclJ1bnRpbWUgbmFtZXNwYWNlLiBPdGhlcndpc2UgY3JlYXRlIGEgbmV3IGVtcHR5XG4gIC8vIG9iamVjdC4gRWl0aGVyIHdheSwgdGhlIHJlc3VsdGluZyBvYmplY3Qgd2lsbCBiZSB1c2VkIHRvIGluaXRpYWxpemVcbiAgLy8gdGhlIHJlZ2VuZXJhdG9yUnVudGltZSB2YXJpYWJsZSBhdCB0aGUgdG9wIG9mIHRoaXMgZmlsZS5cbiAgdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiA/IG1vZHVsZS5leHBvcnRzIDoge31cbikpO1xuXG50cnkge1xuICByZWdlbmVyYXRvclJ1bnRpbWUgPSBydW50aW1lO1xufSBjYXRjaCAoYWNjaWRlbnRhbFN0cmljdE1vZGUpIHtcbiAgLy8gVGhpcyBtb2R1bGUgc2hvdWxkIG5vdCBiZSBydW5uaW5nIGluIHN0cmljdCBtb2RlLCBzbyB0aGUgYWJvdmVcbiAgLy8gYXNzaWdubWVudCBzaG91bGQgYWx3YXlzIHdvcmsgdW5sZXNzIHNvbWV0aGluZyBpcyBtaXNjb25maWd1cmVkLiBKdXN0XG4gIC8vIGluIGNhc2UgcnVudGltZS5qcyBhY2NpZGVudGFsbHkgcnVucyBpbiBzdHJpY3QgbW9kZSwgaW4gbW9kZXJuIGVuZ2luZXNcbiAgLy8gd2UgY2FuIGV4cGxpY2l0bHkgYWNjZXNzIGdsb2JhbFRoaXMuIEluIG9sZGVyIGVuZ2luZXMgd2UgY2FuIGVzY2FwZVxuICAvLyBzdHJpY3QgbW9kZSB1c2luZyBhIGdsb2JhbCBGdW5jdGlvbiBjYWxsLiBUaGlzIGNvdWxkIGNvbmNlaXZhYmx5IGZhaWxcbiAgLy8gaWYgYSBDb250ZW50IFNlY3VyaXR5IFBvbGljeSBmb3JiaWRzIHVzaW5nIEZ1bmN0aW9uLCBidXQgaW4gdGhhdCBjYXNlXG4gIC8vIHRoZSBwcm9wZXIgc29sdXRpb24gaXMgdG8gZml4IHRoZSBhY2NpZGVudGFsIHN0cmljdCBtb2RlIHByb2JsZW0uIElmXG4gIC8vIHlvdSd2ZSBtaXNjb25maWd1cmVkIHlvdXIgYnVuZGxlciB0byBmb3JjZSBzdHJpY3QgbW9kZSBhbmQgYXBwbGllZCBhXG4gIC8vIENTUCB0byBmb3JiaWQgRnVuY3Rpb24sIGFuZCB5b3UncmUgbm90IHdpbGxpbmcgdG8gZml4IGVpdGhlciBvZiB0aG9zZVxuICAvLyBwcm9ibGVtcywgcGxlYXNlIGRldGFpbCB5b3VyIHVuaXF1ZSBwcmVkaWNhbWVudCBpbiBhIEdpdEh1YiBpc3N1ZS5cbiAgaWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSBcIm9iamVjdFwiKSB7XG4gICAgZ2xvYmFsVGhpcy5yZWdlbmVyYXRvclJ1bnRpbWUgPSBydW50aW1lO1xuICB9IGVsc2Uge1xuICAgIEZ1bmN0aW9uKFwiclwiLCBcInJlZ2VuZXJhdG9yUnVudGltZSA9IHJcIikocnVudGltZSk7XG4gIH1cbn1cbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0aWQ6IG1vZHVsZUlkLFxuXHRcdGxvYWRlZDogZmFsc2UsXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuXHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ubm1kID0gZnVuY3Rpb24obW9kdWxlKSB7XG5cdG1vZHVsZS5wYXRocyA9IFtdO1xuXHRpZiAoIW1vZHVsZS5jaGlsZHJlbikgbW9kdWxlLmNoaWxkcmVuID0gW107XG5cdHJldHVybiBtb2R1bGU7XG59OyIsIi8qKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEsIG15SWQsIHRlbXBsYXRlU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaywgYXBpLCBjYXJkRGVsZXRlUG9wdXAsIGNvbmZpcm1CdXR0b24pIHtcclxuICAgICAgICB0aGlzLl90ZXh0ID0gZGF0YS5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICAgICAgdGhpcy5fY2FyZElkID0gZGF0YS5faWQ7XHJcbiAgICAgICAgdGhpcy5fb3duZXJOYW1lID0gZGF0YS5vd25lci5uYW1lO1xyXG4gICAgICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcclxuICAgICAgICB0aGlzLl9teUlkID0gbXlJZDtcclxuICAgICAgICB0aGlzLl9saWtlc0FycmF5ID0gZGF0YS5saWtlcztcclxuICAgICAgICB0aGlzLl9saWtlc0NvdW50ID0gZGF0YS5saWtlcy5sZW5ndGg7XHJcblxyXG4gICAgICAgIHRoaXMuX215TGlrZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX25ld0NhcmQgPSB0ZW1wbGF0ZVNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5waWN0dXJlLWdyaWRfX2l0ZW0nKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcucGljdHVyZS1ncmlkX190aXRsZScpO1xyXG4gICAgICAgIHRoaXMuX2NhcmRQaWN0dXJlID0gdGhpcy5fbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcucGljdHVyZS1ncmlkX19pbWcnKTtcclxuICAgICAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbiA9IHRoaXMuX25ld0NhcmQucXVlcnlTZWxlY3RvcignLnBpY3R1cmUtZ3JpZF9fbGlrZScpO1xyXG4gICAgICAgIHRoaXMuX2NhcmRMaWtlcyA9IHRoaXMuX25ld0NhcmQucXVlcnlTZWxlY3RvcignLnBpY3R1cmUtZ3JpZF9fbGlrZXMnKTtcclxuICAgICAgICB0aGlzLl9jYXJkRGVsZXRlQnV0dG9uID0gdGhpcy5fbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcucGljdHVyZS1ncmlkX19kZWxldGUnKTtcclxuICAgICAgICB0aGlzLl9jb25maXJtQnV0dG9uID0gY29uZmlybUJ1dHRvbjtcclxuXHJcbiAgICAgICAgdGhpcy5fYXBpID0gYXBpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgICAgICB0aGlzLl9jYXJkRGVsZXRlUG9wdXAgPSBjYXJkRGVsZXRlUG9wdXA7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIC8vVG9nZ2xlIGxpa2UgYnV0dG9uXHJcbiAgICAgICAgdGhpcy5fY2FyZExpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fbXlMaWtlKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmFkZCgncGljdHVyZS1ncmlkX19saWtlX2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbXlMaWtlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2FwaS5saWtlKHRoaXMuX2NhcmRJZClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihjYXJkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FyZExpa2VzLnRleHRDb250ZW50ID0gY2FyZC5saWtlcy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgncGljdHVyZS1ncmlkX19saWtlX2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbXlMaWtlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9hcGkuZGlzbGlrZSh0aGlzLl9jYXJkSWQpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oY2FyZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhcmRMaWtlcy50ZXh0Q29udGVudCA9IGNhcmQubGlrZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgLy9PcGVuIGRlbGV0ZSBjb25maXJtYXRpb24gXHJcbiAgICAgICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fY2FyZERlbGV0ZVBvcHVwLm9wZW4oKTtcclxuICAgICAgICAgICAgdGhpcy5fY2FyZERlbGV0ZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpcm1CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9hcGkuZGVsZXRlQ2FyZCh0aGlzLl9jYXJkSWQpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9uZXdDYXJkLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9uZXdDYXJkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FyZERlbGV0ZVBvcHVwLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbmZpcm1CdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9kZWxldGVDYXJkKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgLy9FeHBhbmQgcGljdHVyZVxyXG4gICAgICAgIHRoaXMuX25ld0NhcmQucXVlcnlTZWxlY3RvcignLnBpY3R1cmUtZ3JpZF9faW1nJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpa2VycyA9IHRoaXMuX2xpa2VzQXJyYXkubWFwKChlbGVtZW50KT0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIiBcIitlbGVtZW50Lm5hbWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0gdGhpcy5fdGV4dCtcIiBieSBcIit0aGlzLl9vd25lck5hbWUrXCIuIExpa2VkIGJ5OlwiK2xpa2VycztcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX2xpbmssIHRleHQpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgX2NoZWNrTXlMaWtlcygpIHtcclxuICAgICAgICB0aGlzLl9saWtlc0FycmF5LmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50Ll9pZCA9PT0gdGhpcy5fbXlJZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LmFkZCgncGljdHVyZS1ncmlkX19saWtlX2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbXlMaWtlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9jaGVja0NhcmRPd25lcigpIHtcclxuICAgICAgICBpZiAodGhpcy5fb3duZXJJZCA9PT0gdGhpcy5fbXlJZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9jYXJkRGVsZXRlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3BpY3R1cmUtZ3JpZF9fZGVsZXRlX2Rpc2FibGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9wcmVzZXROZXdDYXJkKCkge1xyXG4gICAgICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX3RleHQ7XHJcbiAgICAgICAgdGhpcy5fY2FyZFBpY3R1cmUuc3JjID0gdGhpcy5fbGluaztcclxuICAgICAgICB0aGlzLl9jYXJkUGljdHVyZS5hbHQgPSB0aGlzLl90ZXh0O1xyXG4gICAgICAgIHRoaXMuX2NhcmRMaWtlcy50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzQ291bnQ7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tNeUxpa2VzKCk7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tDYXJkT3duZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICAvL0NyZWF0ZSBjYXJkXHJcbiAgICBjcmVhdGVDYXJkKCkge1xyXG4gICAgICAgIHRoaXMuX3ByZXNldE5ld0NhcmQoKTtcclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9uZXdDYXJkO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBzZXR0aW5ncy5mb3JtU2VsZWN0b3I7ICAgICAgICAgICAgICAgICAvL1wiLmZvcm1cIlxyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7ICAgICAgICAgICAgICAgLy9cIi5mb3JtX19pbnB1dFwiXHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yOyAvL1wiLmZvcm1fX3N1Ym1pdFwiXHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzczsgICAvL1wiZm9ybV9fc3VibWl0X2Rpc2FibGVkXCJcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzczsgICAgICAgICAgIC8vXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCJcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzOyAgICAgICAgICAgICAgICAgICAgIC8vXCJmb3JtX19lcnJvcl92aXNpYmxlXCJcclxuXHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5faW5wdXRGaWVsZHMgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgX2Rpc2FibGVTdWJtaXRCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwiXCIpO1xyXG4gIH1cclxuXHJcbiAgX2VuYWJsZVN1Ym1pdEJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJcIik7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUgKCkgeyAgXHJcbiAgICBjb25zdCBoYXNJbnZhbGlkSW5wdXQgPSB0aGlzLl9pbnB1dEZpZWxkcy5zb21lKGlucHV0RmllbGQgPT4gIWlucHV0RmllbGQudmFsaWRpdHkudmFsaWQpO1xyXG5cclxuICAgIGlmIChoYXNJbnZhbGlkSW5wdXQpIHtcclxuICAgICAgdGhpcy5fZGlzYWJsZVN1Ym1pdEJ1dHRvbih0aGlzLl9idXR0b25FbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2VuYWJsZVN1Ym1pdEJ1dHRvbih0aGlzLl9idXR0b25FbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RmllbGQsIGVycm9yRWxlbWVudCkge1xyXG4gICAgaW5wdXRGaWVsZC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEZpZWxkLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG4gIFxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEZpZWxkLCBlcnJvckVsZW1lbnQpIHtcclxuICAgIGlucHV0RmllbGQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuICBcclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RmllbGQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RmllbGQuaWR9X2Vycm9yYCk7XHJcblxyXG4gICAgaWYgKGlucHV0RmllbGQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRGaWVsZCwgZXJyb3JFbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RmllbGQsIGVycm9yRWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0RmllbGRzLmZvckVhY2goaW5wdXRGaWVsZCA9PiB7XHJcbiAgICAgIGlucHV0RmllbGQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRGaWVsZCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUodGhpcy5faW5wdXRGaWVsZHMsIHRoaXMuX2J1dHRvbkVsZW1lbnQpO1xyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICB9XHJcbiAgXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgdGhpcy5faW5wdXRGaWVsZHMuZm9yRWFjaChpbnB1dEZpZWxkID0+IHtcclxuICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRGaWVsZC5pZH1fZXJyb3JgKTtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRGaWVsZCwgZXJyb3JFbGVtZW50KTtcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuX3VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3RpdGxlJyk7XHJcbiAgICAgICAgdGhpcy5fdXNlckpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19zdWJ0aXRsZScpO1xyXG4gICAgICAgIHRoaXMuX3VzZXJBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fcGljdHVyZScpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgIHJldHVybiB7IG5hbWU6IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50LCBqb2I6IHRoaXMuX3VzZXJKb2IudGV4dENvbnRlbnQgfTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VySW5mbyhuYW1lLCBqb2IpIHtcclxuICAgICAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5fdXNlckpvYi50ZXh0Q29udGVudCA9IGpvYjtcclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VyQXZhdGFyKGxpbmspIHtcclxuICAgICAgICB0aGlzLl91c2VyQXZhdGFyLnNyYyA9IGxpbms7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9wb3B1cENsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UnKTtcclxuICAgICAgICB0aGlzLl9jbG9zZU9uRXNjYXBlID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9wZW4oKSB7XHJcbiAgICAgICAgLy9hZGQgY2xvc2Ugb24gZXNjYXBlIGV2ZW50IGxpc3RlbmVyXHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9jbG9zZU9uRXNjYXBlKTtcclxuXHJcbiAgICAgICAgdGhpcy5fcG9wdXBJdGVtLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX2lzX29wZW5lZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIC8vcmVtb3ZlIGNsb3NlIG9uIGVzY2FwZSBldmVudCBsaXN0ZW5lclxyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5fY2xvc2VPbkVzY2FwZSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3BvcHVwSXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9pc19vcGVuZWQnKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICAvL2Nsb3NlIG9uIGJ1dHRvbiBjbGlja1xyXG4gICAgICAgIHRoaXMuX3BvcHVwQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICAvL2Nsb3NlIG9uIG92ZXJsYXkgY2xpY2tcclxuICAgICAgICB0aGlzLl9wb3B1cEl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChbLi4uZXZlbnQudGFyZ2V0LmNsYXNzTGlzdF0uaW5jbHVkZXMoJ3BvcHVwJykpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3RvcihzdWJtaXRGb3JtLCBwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0Rm9ybSA9IHN1Ym1pdEZvcm07IC8vc3VibWl0Q2FyZEZvcm0gaW4gaW5kZXguanNcclxuICAgICAgICB0aGlzLl9maWVsZHNEYXRhID0ge307IC8ve2NhcmRfbGluazpcIlwiLCBjYXJkX3RpbGU6XCJcIn0ge2F2YXRhcl9saW5rOlwiXCJ9XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cEl0ZW0ucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcclxuICAgICAgICB0aGlzLl9pbnB1dHNMaXN0ID0gdGhpcy5fcG9wdXBJdGVtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcclxuICAgICAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgICAgICB0aGlzLl9pbnB1dHNMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9maWVsZHNEYXRhW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICAvL3N1Ym1pdCBmb3JtXHJcbiAgICAgICAgdGhpcy5fcG9wdXBJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xyXG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRGb3JtKGV2ZW50LCB0aGlzLl9maWVsZHNEYXRhKTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3RvciAocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3RpdGxlX3R5cGVfcGljdHVyZScpO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwTGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fcGljdHVyZS1saW5rJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9leHBhbmQgcGljdHVyZVxyXG4gICAgb3BlbihsaW5rLCB0ZXh0KSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBMaW5rLnNldEF0dHJpYnV0ZSgnc3JjJywgbGluayk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBMaW5rLnNldEF0dHJpYnV0ZSgnYWx0JywgdGV4dCk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBUaXRsZS50ZXh0Q29udGVudCA9IHRleHQ7XHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNsYXNzU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyOyAvL21ha2VDYXJkSW5zdGFuY2UgaW4gaW5kZXguanNcclxuICAgICAgICB0aGlzLl9jbGFzc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2xhc3NTZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkSXRlbShpdGVtLCBteUlkKSB7XHJcbiAgICAgICAgdGhpcy5fY2xhc3NDb250YWluZXIucHJlcGVuZCh0aGlzLl9yZW5kZXJlcihpdGVtLCBteUlkKSk7IFxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckFsbChpdGVtcywgbXlJZCkge1xyXG4gICAgICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkSXRlbShpdGVtLCBteUlkKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5fdXJsID0gb3B0aW9ucy5iYXNlVXJsO1xyXG4gICAgICAgIHRoaXMuX3Rva2VuID0gb3B0aW9ucy50b2tlbjtcclxuICAgIH1cclxuXHJcbiAgICBnZXRVc2VyRGF0YSgpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgICAgICAgaGVhZGVyczogeyBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbiB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yOiBcIiwgZXJyLnN0YXR1cywgZXJyLnN0YXR1c1RleHQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENhcmRzKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB7IGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3I6IFwiLCBlcnIuc3RhdHVzLCBlcnIuc3RhdHVzVGV4dCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZWRpdFByb2ZpbGUobmFtZSwgYWJvdXQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICAgICAgICBhYm91dDogYWJvdXRcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5hbGVydChcIlNvbWV0aGluZyB3ZW50IHdyb25nLiBQbGVhc2UgY2FuY2VsIGFuZCB0cnkgYWdhaW4uXCIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yOiBcIiwgZXJyLnN0YXR1cywgZXJyLnN0YXR1c1RleHQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVByb2ZpbGVQaWN0dXJlKGxpbmspIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICBhdmF0YXI6IGxpbmtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5hbGVydChcIlNvbWV0aGluZyB3ZW50IHdyb25nLiBQbGVhc2UgY2FuY2VsIGFuZCB0cnkgYWdhaW4uXCIpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvcjogXCIsIGVyci5zdGF0dXMsIGVyci5zdGF0dXNUZXh0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkQ2FyZChuYW1lLCBsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICAgICAgICBsaW5rOiBsaW5rXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICB3aW5kb3cuYWxlcnQoXCJTb21ldGhpbmcgd2VudCB3cm9uZy4gUGxlYXNlIGNhbmNlbCBhbmQgdHJ5IGFnYWluLlwiKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvcjogXCIsIGVyci5zdGF0dXMsIGVyci5zdGF0dXNUZXh0KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBkZWxldGVDYXJkKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtpZH1gLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4gfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvcjogXCIsIGVyci5zdGF0dXMsIGVyci5zdGF0dXNUZXh0KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBsaWtlKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvbGlrZXMvJHtpZH1gLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3I6IFwiLCBlcnIuc3RhdHVzLCBlcnIuc3RhdHVzVGV4dCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGlzbGlrZShpZCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzL2xpa2VzLyR7aWR9YCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yOiBcIiwgZXJyLnN0YXR1cywgZXJyLnN0YXR1c1RleHQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxufSIsIi8qKj09PT09PT09PT09PT09PT09PT09PT09IGNvbnN0YW50cyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIuZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX3N1Ym1pdFwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fc3VibWl0X2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcImZvcm1fX2Vycm9yX3Zpc2libGVcIlxyXG59XHJcblxyXG4vLyBleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4vLyAgIHtcclxuLy8gICAgIGNhcmRfdGl0bGU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbi8vICAgICBjYXJkX2xpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnXCJcclxuLy8gICB9LFxyXG4vLyAgIHtcclxuLy8gICAgIGNhcmRfdGl0bGU6IFwiTGFrZSBMb3Vpc2VcIixcclxuLy8gICAgIGNhcmRfbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGdcIlxyXG4vLyAgIH0sXHJcbi8vICAge1xyXG4vLyAgICAgY2FyZF90aXRsZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4vLyAgICAgY2FyZF9saW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiXHJcbi8vICAgfSxcclxuLy8gICB7XHJcbi8vICAgICBjYXJkX3RpdGxlOiBcIkxhdGVtYXJcIixcclxuLy8gICAgIGNhcmRfbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiXHJcbi8vICAgfSxcclxuLy8gICB7XHJcbi8vICAgICBjYXJkX3RpdGxlOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4vLyAgICAgY2FyZF9saW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnXCJcclxuLy8gICB9LFxyXG4vLyAgIHtcclxuLy8gICAgIGNhcmRfdGl0bGU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuLy8gICAgIGNhcmRfbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiXHJcbi8vICAgfVxyXG4vLyBdO1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVCdXR0b25FZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlUG9wdXBOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fX2lucHV0X3R5cGVfbmFtZScpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZVBvcHVwQWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9faW5wdXRfdHlwZV9hYm91dCcpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19waWN0dXJlJyk7XHJcbmV4cG9ydCBjb25zdCBjYXJkQnV0dG9uQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLXRlbXBsYXRlJykuY29udGVudDtcclxuZXhwb3J0IGNvbnN0IGNvbmZpcm1CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fc3VibWl0X3R5cGVfY29uZmlybScpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZVN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19zdWJtaXRfdHlwZV9wcm9maWxlJyk7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJTdWJtaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fc3VibWl0X3R5cGVfYXZhdGFyJyk7XHJcbmV4cG9ydCBjb25zdCBjYXJkU3VibWl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fX3N1Ym1pdF90eXBlX2NhcmQnKTtcclxuIiwiLyoqPT09PT09PT09PT09PT09PT09PT09PT1pbXBvcnRzID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcbmltcG9ydCBcInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZVwiO1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3JcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm1cIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanNcIjtcclxuaW1wb3J0IHtcclxuICBzZXR0aW5ncywgcHJvZmlsZUJ1dHRvbkVkaXQsIHByb2ZpbGVQb3B1cE5hbWUsIHByb2ZpbGVQb3B1cEFib3V0LFxyXG4gIHByb2ZpbGVBdmF0YXIsIGNhcmRCdXR0b25BZGQsIGNhcmRUZW1wbGF0ZSwgY29uZmlybUJ1dHRvbixcclxuICBwcm9maWxlU3VibWl0QnV0dG9uLCBhdmF0YXJTdWJtaXRCdXR0b24sIGNhcmRTdWJtaXRCdXR0b25cclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG4vKio9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gQ2xhc3NlcyBJbnN0YW5jZXM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMlwiLFxyXG4gIHRva2VuOiBcIjM4MTg1MThhLTBmMDAtNGFmMi1iMTNjLTkzOTQ5YTNiMTdkZVwiXHJcbn0pO1xyXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV90eXBlX3Byb2ZpbGUnKSk7XHJcbmNvbnN0IGNhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX3R5cGVfY2FyZCcpKTtcclxuY29uc3QgYXZhdGFyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV90eXBlX2F2YXRhcicpKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVGb3JtSW5zdGFuY2UgPSBuZXcgUG9wdXBXaXRoRm9ybShzdWJtaXRQcm9maWxlRm9ybSwgJy5wb3B1cF90eXBlX3Byb2ZpbGUnKTtcclxuY29uc3QgY2FyZEZvcm1JbnN0YW5jZSA9IG5ldyBQb3B1cFdpdGhGb3JtKHN1Ym1pdENhcmRGb3JtLCAnLnBvcHVwX3R5cGVfY2FyZCcpO1xyXG5jb25zdCBhdmF0YXJGb3JtSW5zdGFuY2UgPSBuZXcgUG9wdXBXaXRoRm9ybShzdWJtaXRBdmF0YXJGb3JtLCAnLnBvcHVwX3R5cGVfYXZhdGFyJyk7XHJcblxyXG5jb25zdCBpdGVtc1JlbmRlcmVyID0gbmV3IFNlY3Rpb24oeyByZW5kZXJlcjogbWFrZUNhcmRJbnN0YW5jZSB9LCBcIi5waWN0dXJlLWdyaWRcIik7XHJcbmNvbnN0IHVzZXJEYXRhID0gbmV3IFVzZXJJbmZvKCk7XHJcbmNvbnN0IHBpY3R1cmVQb3B1cEluc3RhbmNlID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXBfdHlwZV9waWN0dXJlJyk7XHJcbmNvbnN0IGNhcmREZWxldGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oJy5wb3B1cF90eXBlX2NvbmZpcm0nKTtcclxuXHJcbi8qKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09IGZ1bmN0aW9ucyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG4vL3VwZGF0ZSBwcm9maWxlXHJcbmV4cG9ydCBmdW5jdGlvbiBzdWJtaXRQcm9maWxlRm9ybShldmVudCwgZmllbGRzRGF0YSkge1xyXG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgcHJvZmlsZVN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XHJcbiAgYXBpLmVkaXRQcm9maWxlKGZpZWxkc0RhdGEucHJvZmlsZV9uYW1lLCBmaWVsZHNEYXRhLnByb2ZpbGVfam9iKVxyXG4gICAgLnRoZW4ocHJvZmlsZSA9PiB7XHJcbiAgICAgIHVzZXJEYXRhLnNldFVzZXJJbmZvKHByb2ZpbGUubmFtZSwgcHJvZmlsZS5hYm91dCk7XHJcbiAgICAgIHByb2ZpbGVGb3JtSW5zdGFuY2UuY2xvc2UoKTtcclxuICAgICAgcHJvZmlsZVN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xyXG4gICAgfSlcclxufVxyXG5cclxuLy91cGRhdGUgcHJvZmlsZSBhdmF0YXJcclxuZnVuY3Rpb24gc3VibWl0QXZhdGFyRm9ybShldmVudCwgZmllbGRzRGF0YSkge1xyXG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgYXZhdGFyU3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICBhcGkudXBkYXRlUHJvZmlsZVBpY3R1cmUoZmllbGRzRGF0YS5hdmF0YXJfbGluaylcclxuICAgIC50aGVuKHByb2ZpbGUgPT4ge1xyXG4gICAgICB1c2VyRGF0YS5zZXRVc2VyQXZhdGFyKHByb2ZpbGUuYXZhdGFyKTtcclxuICAgICAgYXZhdGFyRm9ybUluc3RhbmNlLmNsb3NlKCk7XHJcbiAgICAgIGF2YXRhclN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xyXG4gICAgfSlcclxufVxyXG5cclxuLy9jcmVhdGUgbmV3IGNhcmRcclxuZnVuY3Rpb24gc3VibWl0Q2FyZEZvcm0oZXZlbnQsIGZpZWxkc0RhdGEpIHtcclxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGNhcmRTdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xyXG4gIGFwaS5nZXRVc2VyRGF0YSgpXHJcbiAgICAudGhlbihkYXRhID0+IHtcclxuICAgICAgYXBpLmFkZENhcmQoZmllbGRzRGF0YS5jYXJkX3RpdGxlLCBmaWVsZHNEYXRhLmNhcmRfbGluaylcclxuICAgICAgICAudGhlbihjYXJkID0+IHtcclxuICAgICAgICAgIGl0ZW1zUmVuZGVyZXIuYWRkSXRlbShjYXJkLCBkYXRhLl9pZCk7IC8vY2FsbGVkIGFzIHJlbmRlcmVyIGluIFNlY3Rpb24uanNcclxuICAgICAgICAgIGNhcmRTdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIkNyZWF0ZVwiO1xyXG4gICAgICAgICAgY2FyZEZvcm1JbnN0YW5jZS5jbG9zZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUNhcmRJbnN0YW5jZShjYXJkRGF0YSwgbXlJZCkgeyAgLy9jYWxsZWQgYXMgcmVuZGVyZXIgaW4gU2VjdGlvbi5qc1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgbXlJZCwgY2FyZFRlbXBsYXRlLCBoYW5kbGVDYXJkQ2xpY2ssIGFwaSwgY2FyZERlbGV0ZVBvcHVwLCBjb25maXJtQnV0dG9uKTtcclxuICByZXR1cm4gY2FyZC5jcmVhdGVDYXJkKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayhsaW5rLCB0ZXh0KSB7XHJcbiAgcGljdHVyZVBvcHVwSW5zdGFuY2Uub3BlbihsaW5rLCB0ZXh0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gbG9hZENhcmRzRnJvbVNlcnZlcihteUlkKSB7XHJcbiAgYXBpLmdldENhcmRzKCkudGhlbihjYXJkcyA9PiB7XHJcbiAgICBpdGVtc1JlbmRlcmVyLnJlbmRlckFsbChjYXJkcywgbXlJZCk7IC8vaW4gU2VjdGlvbi5qc1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkRGF0YUZyb21TZXJ2ZXIoKSB7XHJcbiAgYXBpLmdldFVzZXJEYXRhKCkudGhlbihkYXRhID0+IHtcclxuICAgIHVzZXJEYXRhLnNldFVzZXJJbmZvKGRhdGEubmFtZSwgZGF0YS5hYm91dCk7XHJcbiAgICB1c2VyRGF0YS5zZXRVc2VyQXZhdGFyKGRhdGEuYXZhdGFyKTtcclxuICAgIGxvYWRDYXJkc0Zyb21TZXJ2ZXIoZGF0YS5faWQpO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vKj09PT09PT09PT09PT09PT09PT09IHByb2ZpbGUgZXZlbnQgbGlzdGVuZXIgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXHJcbi8vT3BlbiBwcm9maWxlIGVkaXQgZm9ybVxyXG5wcm9maWxlQnV0dG9uRWRpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBjb25zdCB7IG5hbWUsIGpvYiB9ID0gdXNlckRhdGEuZ2V0VXNlckluZm8oKTtcclxuICBwcm9maWxlUG9wdXBOYW1lLnZhbHVlID0gbmFtZTtcclxuICBwcm9maWxlUG9wdXBBYm91dC52YWx1ZSA9IGpvYjtcclxuICBwcm9maWxlRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBwcm9maWxlU3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XHJcbiAgcHJvZmlsZUZvcm1JbnN0YW5jZS5vcGVuKCk7XHJcbn0pXHJcblxyXG4vKj09PT09PT09PT09PT09PT09PT0gbmV3IGNhcmQgcG9wdXAgZXZlbnQgbGlzdGVuZXIgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXHJcbi8vT3BlbiBuZXcgY2FyZCBmb3JtXHJcbmNhcmRCdXR0b25BZGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgY2FyZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgY2FyZFN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQ3JlYXRlXCI7XHJcbiAgY2FyZEZvcm1JbnN0YW5jZS5vcGVuKCk7XHJcbn0pXHJcblxyXG4vKio9PT09PT09PT09PT09PT09PT0gZWRpdCB1c2VyJ3MgYXZhdGFyIGV2ZW50IGxpc3RlbmVyID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcbnByb2ZpbGVBdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgYXZhdGFyRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBhdmF0YXJTdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcclxuICBhdmF0YXJGb3JtSW5zdGFuY2Uub3BlbigpO1xyXG59KVxyXG5cclxuLyoqPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IGluaXRpYWwgcnVucyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cclxud2luZG93Lm9ubG9hZCA9ICgpID0+IHtcclxuICAvL2xvYWQgaW5pdGlhbCBjYXJkcyBmcm9tIHRoZSBzZXJ2ZXJcclxuICBsb2FkRGF0YUZyb21TZXJ2ZXIoKTtcclxuXHJcbiAgLy9lbmFibGUgZm9ybXMgdmFsaWRhdGlvblxyXG4gIGNhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICBwcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgYXZhdGFyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4gIC8vZW5hYmxlIGV2ZW50IGxpc3RlbmVyc1xyXG4gIHBpY3R1cmVQb3B1cEluc3RhbmNlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgcHJvZmlsZUZvcm1JbnN0YW5jZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIGNhcmRGb3JtSW5zdGFuY2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICBhdmF0YXJGb3JtSW5zdGFuY2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxufSJdLCJuYW1lcyI6WyJydW50aW1lIiwiZXhwb3J0cyIsInVuZGVmaW5lZCIsIk9wIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duIiwiaGFzT3duUHJvcGVydHkiLCIkU3ltYm9sIiwiU3ltYm9sIiwiaXRlcmF0b3JTeW1ib2wiLCJpdGVyYXRvciIsImFzeW5jSXRlcmF0b3JTeW1ib2wiLCJhc3luY0l0ZXJhdG9yIiwidG9TdHJpbmdUYWdTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsImRlZmluZSIsIm9iaiIsImtleSIsInZhbHVlIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJlcnIiLCJ3cmFwIiwiaW5uZXJGbiIsIm91dGVyRm4iLCJzZWxmIiwidHJ5TG9jc0xpc3QiLCJwcm90b0dlbmVyYXRvciIsIkdlbmVyYXRvciIsImdlbmVyYXRvciIsImNyZWF0ZSIsImNvbnRleHQiLCJDb250ZXh0IiwiX2ludm9rZSIsInN0YXRlIiwiR2VuU3RhdGVTdXNwZW5kZWRTdGFydCIsIm1ldGhvZCIsImFyZyIsIkdlblN0YXRlRXhlY3V0aW5nIiwiRXJyb3IiLCJHZW5TdGF0ZUNvbXBsZXRlZCIsImRvbmVSZXN1bHQiLCJkZWxlZ2F0ZSIsImRlbGVnYXRlUmVzdWx0IiwibWF5YmVJbnZva2VEZWxlZ2F0ZSIsIkNvbnRpbnVlU2VudGluZWwiLCJzZW50IiwiX3NlbnQiLCJkaXNwYXRjaEV4Y2VwdGlvbiIsImFicnVwdCIsInJlY29yZCIsInRyeUNhdGNoIiwidHlwZSIsImRvbmUiLCJHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkIiwibWFrZUludm9rZU1ldGhvZCIsImZuIiwiY2FsbCIsIkdlbmVyYXRvckZ1bmN0aW9uIiwiR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUiLCJJdGVyYXRvclByb3RvdHlwZSIsInRoaXMiLCJnZXRQcm90byIsImdldFByb3RvdHlwZU9mIiwiTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUiLCJ2YWx1ZXMiLCJHcCIsImRlZmluZUl0ZXJhdG9yTWV0aG9kcyIsImZvckVhY2giLCJBc3luY0l0ZXJhdG9yIiwiUHJvbWlzZUltcGwiLCJpbnZva2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicmVzdWx0IiwiX19hd2FpdCIsInRoZW4iLCJ1bndyYXBwZWQiLCJlcnJvciIsInByZXZpb3VzUHJvbWlzZSIsImNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnIiwiVHlwZUVycm9yIiwiaW5mbyIsInJlc3VsdE5hbWUiLCJuZXh0IiwibmV4dExvYyIsInB1c2hUcnlFbnRyeSIsImxvY3MiLCJlbnRyeSIsInRyeUxvYyIsImNhdGNoTG9jIiwiZmluYWxseUxvYyIsImFmdGVyTG9jIiwidHJ5RW50cmllcyIsInB1c2giLCJyZXNldFRyeUVudHJ5IiwiY29tcGxldGlvbiIsInJlc2V0IiwiaXRlcmFibGUiLCJpdGVyYXRvck1ldGhvZCIsImlzTmFOIiwibGVuZ3RoIiwiaSIsImRpc3BsYXlOYW1lIiwiaXNHZW5lcmF0b3JGdW5jdGlvbiIsImdlbkZ1biIsImN0b3IiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJtYXJrIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJhd3JhcCIsImFzeW5jIiwiUHJvbWlzZSIsIml0ZXIiLCJrZXlzIiwib2JqZWN0IiwicmV2ZXJzZSIsInBvcCIsInNraXBUZW1wUmVzZXQiLCJwcmV2IiwiY2hhckF0Iiwic2xpY2UiLCJzdG9wIiwicm9vdFJlY29yZCIsInJ2YWwiLCJleGNlcHRpb24iLCJoYW5kbGUiLCJsb2MiLCJjYXVnaHQiLCJoYXNDYXRjaCIsImhhc0ZpbmFsbHkiLCJmaW5hbGx5RW50cnkiLCJjb21wbGV0ZSIsImZpbmlzaCIsInRocm93biIsImRlbGVnYXRlWWllbGQiLCJtb2R1bGUiLCJyZWdlbmVyYXRvclJ1bnRpbWUiLCJhY2NpZGVudGFsU3RyaWN0TW9kZSIsImdsb2JhbFRoaXMiLCJGdW5jdGlvbiIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsImlkIiwibG9hZGVkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm5tZCIsInBhdGhzIiwiY2hpbGRyZW4iLCJDYXJkIiwiZGF0YSIsIm15SWQiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiYXBpIiwiY2FyZERlbGV0ZVBvcHVwIiwiY29uZmlybUJ1dHRvbiIsIl90ZXh0IiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRJZCIsIl9pZCIsIl9vd25lck5hbWUiLCJvd25lciIsIl9vd25lcklkIiwiX215SWQiLCJfbGlrZXNBcnJheSIsImxpa2VzIiwiX2xpa2VzQ291bnQiLCJfbXlMaWtlIiwiX25ld0NhcmQiLCJxdWVyeVNlbGVjdG9yIiwiY2xvbmVOb2RlIiwiX2NhcmRUaXRsZSIsIl9jYXJkUGljdHVyZSIsIl9jYXJkTGlrZUJ1dHRvbiIsIl9jYXJkTGlrZXMiLCJfY2FyZERlbGV0ZUJ1dHRvbiIsIl9jb25maXJtQnV0dG9uIiwiX2FwaSIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfY2FyZERlbGV0ZVBvcHVwIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiZGlzbGlrZSIsImNhcmQiLCJ0ZXh0Q29udGVudCIsImFkZCIsImxpa2UiLCJvcGVuIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJkZWxldGVDYXJkIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2RlbGV0ZUNhcmQiLCJsaWtlcnMiLCJtYXAiLCJlbGVtZW50IiwidGV4dCIsInNyYyIsImFsdCIsIl9jaGVja015TGlrZXMiLCJfY2hlY2tDYXJkT3duZXIiLCJfcHJlc2V0TmV3Q2FyZCIsIl9zZXRFdmVudExpc3RlbmVycyIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX2Zvcm1TZWxlY3RvciIsImZvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dEZpZWxkcyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfYnV0dG9uRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsInNvbWUiLCJpbnB1dEZpZWxkIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9kaXNhYmxlU3VibWl0QnV0dG9uIiwiX2VuYWJsZVN1Ym1pdEJ1dHRvbiIsImVycm9yRWxlbWVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIlVzZXJJbmZvIiwiX3VzZXJOYW1lIiwiZG9jdW1lbnQiLCJfdXNlckpvYiIsIl91c2VyQXZhdGFyIiwiam9iIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwSXRlbSIsIl9wb3B1cENsb3NlQnV0dG9uIiwiX2Nsb3NlT25Fc2NhcGUiLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJpbmNsdWRlcyIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRGb3JtIiwiX3N1Ym1pdEZvcm0iLCJfZmllbGRzRGF0YSIsIl9pbnB1dHNMaXN0IiwiaW5wdXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJQb3B1cFdpdGhJbWFnZSIsIl9wb3B1cFRpdGxlIiwiX3BvcHVwTGluayIsIlNlY3Rpb24iLCJjbGFzc1NlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY2xhc3NDb250YWluZXIiLCJpdGVtIiwicHJlcGVuZCIsIml0ZW1zIiwiYWRkSXRlbSIsIkFwaSIsIm9wdGlvbnMiLCJfdXJsIiwiYmFzZVVybCIsIl90b2tlbiIsInRva2VuIiwiZmV0Y2giLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInJlcyIsIm9rIiwianNvbiIsInN0YXR1cyIsImNhdGNoIiwiY29uc29sZSIsImxvZyIsInN0YXR1c1RleHQiLCJhYm91dCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwid2luZG93IiwiYWxlcnQiLCJhdmF0YXIiLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJwcm9maWxlQnV0dG9uRWRpdCIsInByb2ZpbGVQb3B1cE5hbWUiLCJwcm9maWxlUG9wdXBBYm91dCIsInByb2ZpbGVBdmF0YXIiLCJjYXJkQnV0dG9uQWRkIiwiY2FyZFRlbXBsYXRlIiwiY29udGVudCIsInByb2ZpbGVTdWJtaXRCdXR0b24iLCJhdmF0YXJTdWJtaXRCdXR0b24iLCJjYXJkU3VibWl0QnV0dG9uIiwicHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJjYXJkRm9ybVZhbGlkYXRvciIsImF2YXRhckZvcm1WYWxpZGF0b3IiLCJwcm9maWxlRm9ybUluc3RhbmNlIiwiZmllbGRzRGF0YSIsInByZXZlbnREZWZhdWx0IiwiZWRpdFByb2ZpbGUiLCJwcm9maWxlX25hbWUiLCJwcm9maWxlX2pvYiIsInByb2ZpbGUiLCJ1c2VyRGF0YSIsInNldFVzZXJJbmZvIiwiY2FyZEZvcm1JbnN0YW5jZSIsImdldFVzZXJEYXRhIiwiYWRkQ2FyZCIsImNhcmRfdGl0bGUiLCJjYXJkX2xpbmsiLCJpdGVtc1JlbmRlcmVyIiwiYXZhdGFyRm9ybUluc3RhbmNlIiwidXBkYXRlUHJvZmlsZVBpY3R1cmUiLCJhdmF0YXJfbGluayIsInNldFVzZXJBdmF0YXIiLCJjYXJkRGF0YSIsImNyZWF0ZUNhcmQiLCJwaWN0dXJlUG9wdXBJbnN0YW5jZSIsImdldFVzZXJJbmZvIiwicmVzZXRWYWxpZGF0aW9uIiwib25sb2FkIiwiZ2V0Q2FyZHMiLCJjYXJkcyIsInJlbmRlckFsbCIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9